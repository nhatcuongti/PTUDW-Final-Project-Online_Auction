Index: views/layouts/seller.layout.insert.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Home</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\" integrity=\"sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <style>\r\n        .card-footer{\r\n            background-color: #fff;\r\n            border-radius: 50px !important;\r\n            margin: 5px;\r\n        }\r\n        .dropdown-item:hover{\r\n            cursor: pointer;\r\n        }\r\n        ul{\r\n            list-style-type: none;\r\n        }\r\n        body{\r\n            color: #4a4a4a;\r\n            font-size: 1em;\r\n            font-weight: 400;\r\n            line-height: 1.5;\r\n        }\r\n        aside a{\r\n            color: #4a4a4a;\r\n            font-size: 1em;\r\n            font-weight: 400;\r\n            line-height: 1.5;\r\n            display: block;\r\n            padding: 10px;\r\n\r\n        }\r\n\r\n        nav a{\r\n            color: #4a4a4a;\r\n            font-size: 1em;\r\n            font-weight: 400;\r\n            line-height: 1.5;\r\n        }\r\n    </style>\r\n\r\n    {{{_sections.css}}}\r\n</head>\r\n<body>\r\n<nav class=\"navbar navbar-expand-md \" style=\"background-color: #b5b5b5;\">\r\n    <div class=\"navbar-brand\">\r\n        <a class=\"navbar-brand\" href=\"#\">\r\n            <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\">\r\n        </a>\r\n    </div>\r\n\r\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n\r\n    <div class=\"collapse navbar-collapse row\" id=\"navbarSupportedContent\">\r\n        <div class=\"col-6\">\r\n            <ul class=\"navbar-nav ml-5\">\r\n                <a href=\"/seller/channel\" class=\"navbar-item text-decoration-none\">\r\n                    Kênh người bán\r\n                </a>\r\n\r\n                {{#if XemSanPham.isActive}}\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\" >\r\n                        Xem sản phẩm\r\n                    </a>\r\n                    {{#if XemChiTiet.isActive}}\r\n                        <span class=\"navbar-item\"> > </span>\r\n                        <p href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\">\r\n                            Xem Chi Tiết\r\n                        </p>\r\n                    {{/if}}\r\n                {{else if ThemSanPham.isActive}}\r\n\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product/insert\" class=\"navbar-item text-decoration-none\">\r\n                        Thêm Sản phẩm\r\n                    </a>\r\n                {{/if}}\r\n            </ul>\r\n        </div>\r\n        <div class=\"col-6\">\r\n            <ul class=\"navbar-nav  \">\r\n                <li class=\"nav-item dropdown w-100 row justify-content-end \">\r\n                    <a class=\"nav-link dropdown-toggle active ml-auto\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                        <i class=\"fa fa-user-circle fa-3x\" aria-hidden=\"true\"></i>\r\n                        <b class=\"ml-3 h3\">\r\n                            {{user.name}}\r\n                        </b>\r\n                    </a>\r\n                    <div class=\"dropdown-menu dropdown-menu-right \" aria-labelledby=\"navbarDropdown\">\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/update-profile\" >\r\n                            <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Thông tin cá nhân\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/favorite\">\r\n                            <i class=\"fa fa-heart-o fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Danh sách yêu thích\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/auction-history\">\r\n                            <i class=\"fa fa-history fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Lịch sử đấu giá\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/comment-from-seller/{{user._id}}\">\r\n                            <i class=\"fa fa-comment fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Đánh giá từ người bán\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" >\r\n                            <i class=\"fa fa-cube fa-2x mr-1\" aria-hidden=\"true\"></i>\r\n                            Kênh Người bán\r\n                        </a>\r\n                        <hr class=\"dropdown-divider\">\r\n                        <a class=\"dropdown-item text-decoration-none\"  href=\"javascript: $('#formLogout').submit();\">\r\n                            <i class=\"fa fa-sign-out fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Đăng xuất\r\n                        </a>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n    </div>\r\n</nav>\r\n\r\n<section>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-3 pt-6 min-vh-100\" style=\"background-color: #b5b5b5\">\r\n            <aside class=\"menu  p-3\"  >\r\n                <ul class=\"menu-list h4 mb-5 pl-2 mt-5\">\r\n                    <a class=\"text-decoration-none menu-label {{#if ThongTinChung.isActive}}is-active{{/if}}\" href=\"/seller/channel\">\r\n                        <i class=\"fa fa-tachometer fa-2x \" aria-hidden=\"true\"></i>\r\n                        Thông Tin Chung\r\n                    </a>\r\n                </ul>\r\n\r\n                <ul class=\"menu-list h4 mb-5 pl-2 \">\r\n                    <li >\r\n                        <a class=\"text-decoration-none menu-label \" href=\"/seller/channel/product\">\r\n                            <i class=\"fa fa-cube fa-2x\" aria-hidden=\"true\"></i>\r\n                            Quản lý Sản Phẩm\r\n                        </a>\r\n                        <ul class=\"mt-3\" style=\"border-left: 1px solid #FFFFFF\">\r\n                            <li><a class=\"text-decoration-none {{#if XemSanPham.isActive}}is-active{{/if}}\" href=\"/seller/channel/product\">Xem Sản phẩm</a></li>\r\n                            <li class=\"mt-2\"><a class=\"text-decoration-none w-100\" style=\"background-color: #485fc7; color: #FFFFFF\" href=\"/seller/channel/product/insert\">Thêm Sản Phẩm</a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n\r\n                <ul class=\"menu-list h4 mb-5 pl-2\">\r\n                    <a class=\"menu-label {{#if DanhGia.isActive}}is-active{{/if}}\" href=\"/seller/evaluate/{{sellerID}}\">\r\n                        <i class=\"fa fa-users fa-2x \" aria-hidden=\"true\"></i>\r\n                        Đánh giá của người mua\r\n                    </a>\r\n                </ul>\r\n\r\n            </aside>\r\n        </div>\r\n\r\n        <div class=\"col-sm-9\">\r\n            {{{body}}}\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<script src=\"https://code.jquery.com/jquery-3.6.0.min.js\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js\" integrity=\"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js\" integrity=\"sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2\" crossorigin=\"anonymous\"></script>\r\n{{{_sections.js}}}\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/layouts/seller.layout.insert.hbs b/views/layouts/seller.layout.insert.hbs
--- a/views/layouts/seller.layout.insert.hbs	(revision ac06e600f8d71e75de33aee05c4ae285ea074354)
+++ b/views/layouts/seller.layout.insert.hbs	(date 1642082858770)
@@ -2,7 +2,7 @@
 <html lang="en">
 <head>
     <meta charset="UTF-8">
-    <title>Home</title>
+    <title>Online Auction - Kênh Người Bán</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <style>
@@ -39,15 +39,29 @@
             font-weight: 400;
             line-height: 1.5;
         }
+
+        .navLink:hover{
+            background-color: #D10024!important;
+        }
+
+        aside a:hover{
+            background-color: #485fc7!important;
+        }
+
+        @media screen and (min-width: 710px) {
+            .columnMenu{
+                min-height: 100vh;
+            }
+        }
     </style>
 
     {{{_sections.css}}}
 </head>
 <body>
-<nav class="navbar navbar-expand-md " style="background-color: #b5b5b5;">
+<nav class="navbar navbar-expand-md " style="background-color: #15161D; border-bottom: 3px solid #D10024">
     <div class="navbar-brand">
-        <a class="navbar-brand" href="#">
-            <img src="https://bulma.io/images/bulma-logo.png" width="112" height="28">
+        <a class="navbar-brand p-0" href="/" style="height: 70px">
+            <img src="https://hltcons.com/wp-content/uploads/2021/03/HLTCONS.png"  style="width: 200px; max-height: 100% !important; display: block!important;">
         </a>
     </div>
 
@@ -57,26 +71,26 @@
 
     <div class="collapse navbar-collapse row" id="navbarSupportedContent">
         <div class="col-6">
-            <ul class="navbar-nav ml-5">
-                <a href="/seller/channel" class="navbar-item text-decoration-none">
+            <ul class="navbar-nav ml-5 text-white">
+                <a href="/seller/channel" class="navbar-item text-decoration-none text-white navLink">
                     Kênh người bán
                 </a>
 
                 {{#if XemSanPham.isActive}}
                     <span class="navbar-item"> > </span>
-                    <a href="/seller/channel/product" class="navbar-item text-decoration-none" >
+                    <a href="/seller/channel/product" class="navbar-item text-decoration-none text-white navLink p-5" >
                         Xem sản phẩm
                     </a>
                     {{#if XemChiTiet.isActive}}
                         <span class="navbar-item"> > </span>
-                        <p href="/seller/channel/product" class="navbar-item text-decoration-none">
+                        <p href="/seller/channel/product" class="navbar-item text-decoration-none text-white navLink">
                             Xem Chi Tiết
                         </p>
                     {{/if}}
                 {{else if ThemSanPham.isActive}}
 
                     <span class="navbar-item"> > </span>
-                    <a href="/seller/channel/product/insert" class="navbar-item text-decoration-none">
+                    <a href="/seller/channel/product/insert" class="navbar-item text-decoration-none text-white navLink">
                         Thêm Sản phẩm
                     </a>
                 {{/if}}
Index: views/layouts/seller.layout.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Home</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\" integrity=\"sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css\">\r\n    <style>\r\n        .card-footer{\r\n            background-color: #fff;\r\n            border-radius: 50px !important;\r\n            margin: 5px;\r\n        }\r\n    </style>\r\n\r\n    {{{_sections.css}}}\r\n</head>\r\n<body>\r\n    <nav class=\"navbar has-background-grey-light \"  role=\"navigation\" aria-label=\"main navigation\">\r\n        <div class=\"navbar-brand\">\r\n            <a class=\"navbar-item\" href=\"/\">\r\n                <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\">\r\n            </a>\r\n            <a role=\"button\" class=\"navbar-burger\" aria-label=\"menu\" aria-expanded=\"false\">\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n            </a>\r\n        </div>\r\n        <div class=\"navbar-menu\">\r\n            <div class=\"navbar-start\">\r\n\r\n                <a href=\"/seller/channel\" class=\"navbar-item text-decoration-none\">\r\n                    <strong>\r\n                        Kênh người bán\r\n                    </strong>\r\n\r\n                </a>\r\n\r\n                {{#if XemSanPham.isActive}}\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\">\r\n                        <strong>\r\n                            Xem sản phẩm\r\n                        </strong>\r\n                    </a>\r\n                    {{#if XemChiTiet.isActive}}\r\n                        <span class=\"navbar-item\"> > </span>\r\n                        <p href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\">\r\n                            <strong>\r\n                                Xem Chi Tiết\r\n                            </strong>\r\n                        </p>\r\n                    {{/if}}\r\n                {{else if ThemSanPham.isActive}}\r\n\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product/insert\" class=\"navbar-item text-decoration-none\">\r\n                        <strong>\r\n                            Thêm Sản phẩm\r\n                        </strong>\r\n                    </a>\r\n                {{/if}}\r\n\r\n\r\n            </div>\r\n            <div class=\"navbar-end\">\r\n                <div class=\"navbar-item has-dropdown is-hoverable\">\r\n                    <div href=\"#\" class=\"navbar-link\">\r\n                        <i class=\"fa fa-user-circle fa-3x\" aria-hidden=\"true\"></i>\r\n                        <p class=\"ml-3\">\r\n                            {{user.name}}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div class=\"navbar-dropdown is-right\">\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/update-profile\" >\r\n                            <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Thông tin cá nhân\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/favorite\">\r\n                            <i class=\"fa fa-heart-o fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Danh sách yêu thích\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/auction-history\">\r\n                            <i class=\"fa fa-history fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Lịch sử đấu giá\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/comment-from-seller/{{user._id}}\">\r\n                            <i class=\"fa fa-comment fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Đánh giá từ người bán\r\n                        </a>\r\n                        <a class=\"navbar-item text-decoration-none\">\r\n                            <i class=\"fa fa-cube fa-2x mr-1\" aria-hidden=\"true\"></i>\r\n                            Kênh Người bán\r\n                        </a>\r\n                        <hr class=\"navbar-divider\">\r\n                        <form id=\"formLogout\" action=\"/account/logout\" method=\"post\"></form>\r\n                        <a class=\"navbar-item text-decoration-none\" href=\"javascript: $('#formLogout').submit();\">\r\n                            <i class=\"fa fa-sign-out fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Đăng xuất\r\n                        </a>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n\r\n    <section>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-3 has-background-grey-light pt-6 min-vh-100\">\r\n                <aside class=\"menu\">\r\n                    <ul class=\"menu-list h4 mb-5\">\r\n                        <a class=\"menu-label text-decoration-none {{#if ThongTinChung.isActive}}is-active{{/if}}\" href=\"/seller/channel\">\r\n                            <i class=\"fa fa-tachometer fa-2x \" aria-hidden=\"true\"></i>\r\n                            Thông tin chung\r\n                        </a>\r\n                    </ul>\r\n\r\n                    <ul class=\"menu-list h4 mb-5\">\r\n                        <li>\r\n                            <a class=\"menu-label text-decoration-none\" href=\"/seller/channel/product\">\r\n                                <i class=\"fa fa-cube fa-2x\" aria-hidden=\"true\"></i>\r\n                                Quản lý sản phẩm\r\n                            </a>\r\n                            <ul>\r\n                                <li><a class=\"{{#if XemSanPham.isActive}}is-active{{/if}} text-decoration-none\" href=\"/seller/channel/product\">Xem sản phẩm</a></li>\r\n                                <li><a class=\"{{#if ThemSanPham.isActive}}is-active{{/if}} text-decoration-none\" href=\"/seller/channel/product/insert\">Thêm sản phẩm</a></li>\r\n                            </ul>\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <ul class=\"menu-list h4 mb-5\">\r\n                        <a class=\"menu-label text-decoration-none {{#if DanhGia.isActive}}is-active{{/if}}\" href=\"/user/comment-from-bidder/{{sellerID}}\">\r\n                            <i class=\"fa fa-users fa-2x \" aria-hidden=\"true\"></i>\r\n                            Đánh giá của người mua\r\n                        </a>\r\n                    </ul>\r\n\r\n                </aside>\r\n            </div>\r\n\r\n            <div class=\"col-md-9\">\r\n                {{{body}}}\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js\" integrity=\"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js\" integrity=\"sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2\" crossorigin=\"anonymous\"></script>\r\n    {{{_sections.js}}}\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/layouts/seller.layout.hbs b/views/layouts/seller.layout.hbs
--- a/views/layouts/seller.layout.hbs	(revision ac06e600f8d71e75de33aee05c4ae285ea074354)
+++ b/views/layouts/seller.layout.hbs	(date 1642082829340)
@@ -2,7 +2,7 @@
 <html lang="en">
 <head>
     <meta charset="UTF-8">
-    <title>Home</title>
+    <title>Online Auction - Kênh Người Bán</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
@@ -12,15 +12,28 @@
             border-radius: 50px !important;
             margin: 5px;
         }
+        .navLink:hover{
+            background-color: #D10024!important;
+        }
+
+        aside a:hover{
+            background-color: #485fc7!important;
+        }
+
+        @media screen and (min-width: 710px) {
+            .columnMenu{
+                min-height: 100vh;
+            }
+        }
     </style>
 
     {{{_sections.css}}}
 </head>
 <body>
-    <nav class="navbar has-background-grey-light "  role="navigation" aria-label="main navigation">
-        <div class="navbar-brand">
-            <a class="navbar-item" href="/">
-                <img src="https://bulma.io/images/bulma-logo.png" width="112" height="28">
+    <nav class="navbar "  role="navigation" aria-label="main navigation" style="background-color: #15161D; border-bottom: 3px solid #D10024">
+        <div class="navbar-brand" >
+            <a class="navbar-item p-0" style="height: 70px" href="/">
+                <img src="https://hltcons.com/wp-content/uploads/2021/03/HLTCONS.png"  style="width: 200px; max-height: 100% !important; display: block!important;">
             </a>
             <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                 <span aria-hidden="true"></span>
@@ -31,24 +44,24 @@
         <div class="navbar-menu">
             <div class="navbar-start">
 
-                <a href="/seller/channel" class="navbar-item text-decoration-none">
-                    <strong>
+                <a href="/seller/channel" class="navbar-item text-decoration-none navLink">
+                    <strong class="text-white">
                         Kênh người bán
                     </strong>
 
                 </a>
 
                 {{#if XemSanPham.isActive}}
-                    <span class="navbar-item"> > </span>
-                    <a href="/seller/channel/product" class="navbar-item text-decoration-none">
-                        <strong>
+                    <span class="navbar-item text-white"> > </span>
+                    <a href="/seller/channel/product" class="navbar-item text-decoration-none navLink">
+                        <strong class="text-white">
                             Xem sản phẩm
                         </strong>
                     </a>
                     {{#if XemChiTiet.isActive}}
-                        <span class="navbar-item"> > </span>
+                        <span class="navbar-item text-white"> > </span>
                         <p href="/seller/channel/product" class="navbar-item text-decoration-none">
-                            <strong>
+                            <strong class="text-white">
                                 Xem Chi Tiết
                             </strong>
                         </p>
@@ -57,7 +70,7 @@
 
                     <span class="navbar-item"> > </span>
                     <a href="/seller/channel/product/insert" class="navbar-item text-decoration-none">
-                        <strong>
+                        <strong class="text-white">
                             Thêm Sản phẩm
                         </strong>
                     </a>
@@ -67,7 +80,7 @@
             </div>
             <div class="navbar-end">
                 <div class="navbar-item has-dropdown is-hoverable">
-                    <div href="#" class="navbar-link">
+                    <div href="#" class="navbar-link text-white navLink">
                         <i class="fa fa-user-circle fa-3x" aria-hidden="true"></i>
                         <p class="ml-3">
                             {{user.name}}
@@ -110,10 +123,10 @@
 
     <section>
         <div class="row">
-            <div class="col-md-3 has-background-grey-light pt-6 min-vh-100">
+            <div class="col-md-3 has-background-grey-light pt-6 columnMenu " style="background-color: #15161D!important;">
                 <aside class="menu">
                     <ul class="menu-list h4 mb-5">
-                        <a class="menu-label text-decoration-none {{#if ThongTinChung.isActive}}is-active{{/if}}" href="/seller/channel">
+                        <a class="menu-label text-decoration-none text-white {{#if ThongTinChung.isActive}}is-active{{/if}}" href="/seller/channel">
                             <i class="fa fa-tachometer fa-2x " aria-hidden="true"></i>
                             Thông tin chung
                         </a>
@@ -121,19 +134,19 @@
 
                     <ul class="menu-list h4 mb-5">
                         <li>
-                            <a class="menu-label text-decoration-none" href="/seller/channel/product">
+                            <a class="menu-label text-decoration-none text-white" href="/seller/channel/product">
                                 <i class="fa fa-cube fa-2x" aria-hidden="true"></i>
                                 Quản lý sản phẩm
                             </a>
                             <ul>
-                                <li><a class="{{#if XemSanPham.isActive}}is-active{{/if}} text-decoration-none" href="/seller/channel/product">Xem sản phẩm</a></li>
-                                <li><a class="{{#if ThemSanPham.isActive}}is-active{{/if}} text-decoration-none" href="/seller/channel/product/insert">Thêm sản phẩm</a></li>
+                                <li><a class="text-white {{#if XemSanPham.isActive}}is-active{{/if}} text-decoration-none" href="/seller/channel/product">Xem sản phẩm</a></li>
+                                <li><a class="text-white {{#if ThemSanPham.isActive}}is-active{{/if}} text-decoration-none" href="/seller/channel/product/insert">Thêm sản phẩm</a></li>
                             </ul>
                         </li>
                     </ul>
 
                     <ul class="menu-list h4 mb-5">
-                        <a class="menu-label text-decoration-none {{#if DanhGia.isActive}}is-active{{/if}}" href="/user/comment-from-bidder/{{sellerID}}">
+                        <a class="menu-label text-decoration-none text-white {{#if DanhGia.isActive}}is-active{{/if}}" href="/user/comment-from-bidder/{{sellerID}}">
                             <i class="fa fa-users fa-2x " aria-hidden="true"></i>
                             Đánh giá của người mua
                         </a>
Index: views/layouts/admin.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Website Management</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\" integrity=\"sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css\">\r\n    {{{_sections.css}}}\r\n</head>\r\n<body>\r\n<nav class=\"navbar has-background-grey-light\" role=\"navigation\" aria-label=\"main navigation\">\r\n    <div class=\"navbar-brand\">\r\n        <a class=\"navbar-item\" href=\"/\">\r\n            <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\">\r\n        </a>\r\n        <a role=\"button\" class=\"navbar-burger\" onclick=\"document.querySelector('.navbar-menu').classList.toggle('is-active');\" aria-label=\"menu\" aria-expanded=\"false\">\r\n            <span aria-hidden=\"true\"></span>\r\n            <span aria-hidden=\"true\"></span>\r\n            <span aria-hidden=\"true\"></span>\r\n        </a>\r\n    </div>\r\n    <div class=\"navbar-menu\">\r\n        <div class=\"navbar-start\">\r\n            <a href=\"/admin\" class=\"navbar-item text-decoration-none\">\r\n                <strong> Kênh quản trị </strong>\r\n            </a>\r\n            {{#if this.homeTab}}\r\n            {{else}}\r\n                <p class=\"navbar-item\">\r\n                    <strong> > </strong>\r\n                </p>\r\n            {{/if}}\r\n\r\n            {{#if this.productTab}}\r\n                <a class=\"navbar-item text-decoration-none\" href=\"/admin/product\">\r\n                <strong>\r\n                    Quản lý sản phẩm\r\n            {{/if}}\r\n            {{#if this.categoryTab}}\r\n                <a class=\"navbar-item text-decoration-none\" href=\"/admin/category\">\r\n                <strong>\r\n                    Quản lý danh mục\r\n            {{/if}}\r\n            {{#if this.userTab}}\r\n                <a class=\"navbar-item text-decoration-none\" href=\"/admin/user\">\r\n                <strong>\r\n                    Quản lý người dùng\r\n            {{/if}}\r\n                </strong>\r\n            </a>\r\n            {{#if this.edit}}\r\n                <p class=\"navbar-item\">\r\n                    <strong> > </strong>\r\n                </p>\r\n                <a class=\"navbar-item text-decoration-none\">\r\n                    <strong>\r\n                        Chỉnh sửa danh mục\r\n                    </strong>\r\n                </a>\r\n            {{/if}}\r\n            {{#if this.upgrade}}\r\n                <p class=\"navbar-item\">\r\n                    <strong> > </strong>\r\n                </p>\r\n                <a class=\"navbar-item text-decoration-none\" href=\"/admin/user/upgrade\">\r\n                    <strong>\r\n                        Danh sách nâng cấp\r\n                    </strong>\r\n                </a>\r\n            {{/if}}\r\n            {{#if this.detail}}\r\n                <p class=\"navbar-item\">\r\n                    <strong> > </strong>\r\n                </p>\r\n                <a class=\"navbar-item text-decoration-none\">\r\n                    <strong>\r\n                        Nâng cấp người dùng\r\n                    </strong>\r\n                </a>\r\n            {{/if}}\r\n            {{#if this.add}}\r\n                <p class=\"navbar-item\">\r\n                    <strong> > </strong>\r\n                </p>\r\n                <a class=\"navbar-item text-decoration-none\" href=\"/admin/user/add\">\r\n                    <strong>\r\n                        Thêm người dùng\r\n                    </strong>\r\n                </a>\r\n            {{/if}}\r\n            {{#if this.addCat}}\r\n                <p class=\"navbar-item\">\r\n                    <strong> > </strong>\r\n                </p>\r\n                <a class=\"navbar-item text-decoration-none\" href=\"/admin/category/add\">\r\n                    <strong>\r\n                        Thêm danh mục\r\n                    </strong>\r\n                </a>\r\n            {{/if}}\r\n        </div>\r\n        <div class=\"navbar-end\">\r\n            <div class=\"navbar-item has-dropdown is-hoverable\">\r\n                <div class=\"navbar-link\">\r\n                    <i class=\"fa fa-user-circle fa-3x\" aria-hidden=\"true\"></i>\r\n                    <p class=\"ml-3\">{{user.name}}</p>\r\n                </div>\r\n                <div class=\"navbar-dropdown\">\r\n                    <a class=\"navbar-item text-decoration-none\" href=\"/\">\r\n                        <i class=\"fa fa-home mr-2\" aria-hidden=\"true\"></i>\r\n                        Trang chủ\r\n                    </a>\r\n                    <a class=\"navbar-item text-decoration-none\" href=\"/user/update-profile\">\r\n                        <i class=\"fa fa-user mr-2\" aria-hidden=\"true\"></i>\r\n                        Thông tin cá nhân\r\n                    </a>\r\n                    <a class=\"navbar-item text-decoration-none\" href=\"/user/favorite\">\r\n                        <i class=\"fa fa-heart mr-2\" aria-hidden=\"true\"></i>\r\n                        Danh sách yêu thích\r\n                    </a>\r\n                    <a class=\"navbar-item text-decoration-none\" href=\"/user/auction-history\">\r\n                        <i class=\"fa fa-history mr-2\" aria-hidden=\"true\"></i>\r\n                        Lịch sử đấu giá\r\n                    </a>\r\n                    <a class=\"navbar-item text-decoration-none\" href=\"/user/comment-from-seller/{{user._id}}\">\r\n                        <i class=\"fa fa-comment mr-2\" aria-hidden=\"true\"></i>\r\n                        Đánh giá từ người bán\r\n                    </a>\r\n                    <hr class=\"navbar-divider\">\r\n                    <form id=\"formLogout\" action=\"/account/logout\" method=\"post\"></form>\r\n                    <a class=\"navbar-item text-decoration-none\" href=\"javascript: $('#formLogout').submit();\">\r\n                        <i class=\"fa fa-sign-out fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                        Đăng xuất\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nav>\r\n<section>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-3 has-background-grey-light pt-6\" style=\"height: 100vh;\">\r\n            <aside class=\"menu\">\r\n                <ul class=\"menu-list h4 mb-5\">\r\n                    {{#if this.homeTab}}\r\n                        <a style=\"text-decoration:none\" class=\"menu-label is-active\" href=\"/admin\">\r\n                    {{else}}\r\n                        <a style=\"text-decoration:none\" class=\"menu-label\" href=\"/admin\">\r\n                    {{/if}}\r\n                        <i class=\"fa fa-tachometer fa-2x\" aria-hidden=\"true\"></i>\r\n                        Thông tin chung\r\n                    </a>\r\n                </ul>\r\n                <ul class=\"menu-list h4 mb-5\">\r\n                    {{#if this.categoryTab}}\r\n                        <a style=\"text-decoration:none\" class=\"menu-label is-active\" href=\"/admin/category\">\r\n                    {{else}}\r\n                        <a style=\"text-decoration:none\" class=\"menu-label\" href=\"/admin/category\">\r\n                    {{/if}}\r\n                        <i class=\"fa fa-list fa-2x\" aria-hidden=\"true\"></i>\r\n                        Quản lý danh mục\r\n                    </a>\r\n                </ul>\r\n                <ul class=\"menu-list h4 mb-5\">\r\n                    {{#if this.productTab}}\r\n                        <a style=\"text-decoration:none\" class=\"menu-label is-active\" href=\"/admin/product\">\r\n                    {{else}}\r\n                        <a style=\"text-decoration:none\" class=\"menu-label\" href=\"/admin/product\">\r\n                    {{/if}}\r\n                        <i class=\"fa fa-cube fa-2x\" aria-hidden=\"true\"></i>\r\n                        Quản lý sản phẩm\r\n                    </a>\r\n                </ul>\r\n                <ul class=\"menu-list h4 mb-5\">\r\n                    <li>\r\n                        {{#if this.userTab}}\r\n                            {{#if this.upgrade}}\r\n                                <a style=\"text-decoration:none\" class=\"menu-label\" href=\"/admin/user\">\r\n                            {{else}}\r\n                                <a style=\"text-decoration:none\" class=\"menu-label is-active\" href=\"/admin/user\">\r\n                            {{/if}}\r\n                        {{else}}\r\n                            <a style=\"text-decoration:none\" class=\"menu-label\" href=\"/admin/user\">\r\n                        {{/if}}\r\n                                <i class=\"fa fa-users fa-2x\" aria-hidden=\"true\"></i>\r\n                            Quản lý người dùng\r\n                        </a>\r\n                        <ul>\r\n                            <li>\r\n                                {{#if this.upgrade}}\r\n                                    <a style=\"text-decoration:none\" class=\"is-active\" href=\"/admin/user/upgrade\">Danh sách nâng cấp</a>\r\n                                {{else}}\r\n                                    <a style=\"text-decoration:none\" href=\"/admin/user/upgrade\">Danh sách nâng cấp</a>\r\n                                {{/if}}\r\n                            </li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n            </aside>\r\n        </div>\r\n        {{{body}}}\r\n        </div>\r\n</section>\r\n<script src=\"https://code.jquery.com/jquery-3.6.0.min.js\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js\" integrity=\"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js\" integrity=\"sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2\" crossorigin=\"anonymous\"></script>\r\n{{{_sections.js}}}\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/layouts/admin.hbs b/views/layouts/admin.hbs
--- a/views/layouts/admin.hbs	(revision ac06e600f8d71e75de33aee05c4ae285ea074354)
+++ b/views/layouts/admin.hbs	(date 1642082848679)
@@ -2,7 +2,7 @@
 <html lang="en">
 <head>
     <meta charset="UTF-8">
-    <title>Website Management</title>
+    <title>Online Auction - Kênh Quản Trị</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
Index: views/seller/channel_product.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{{#section 'js'}}\r\n<!--    <script>-->\r\n<!--        function countDown(el) { // Create a function that recieves the element as argument-->\r\n\r\n<!--            const countDownDate = new Date(el.dataset.date).getTime();-->\r\n<!--            const now = new Date().getTime();-->\r\n<!--            const dif = countDownDate - now;-->\r\n<!--            const h = Math.floor( dif / (1000 * 60 * 60));-->\r\n<!--            const m = Math.floor((dif % (1000 * 60 * 60)) / (1000 * 60));-->\r\n<!--            if (h >= 1 || m > 10)-->\r\n<!--                return;-->\r\n\r\n\r\n\r\n<!--            const x = setInterval(function() {-->\r\n\r\n<!--                const now = new Date().getTime();-->\r\n<!--                const dif = countDownDate - now;-->\r\n<!--                const h = Math.floor( dif / (1000 * 60 * 60));-->\r\n<!--                const m = Math.floor((dif % (1000 * 60 * 60)) / (1000 * 60));-->\r\n<!--                const s = Math.floor((dif % (1000 * 60)) / 1000);-->\r\n\r\n<!--                const formatted = `<span class=\"text-danger h4\">Còn ${m} phút ${s} giây</span>`;-->\r\n<!--                // Output the result in the argument element-->\r\n<!--                el.innerHTML = dif < 0 ? \"Đã hết hạn\" : formatted;-->\r\n\r\n<!--                // If the count down is over, stop Intervals-->\r\n<!--                if (dif < 0) {-->\r\n<!--                    clearInterval(x);-->\r\n<!--                }-->\r\n<!--            }, 1000);-->\r\n\r\n<!--        }-->\r\n\r\n\r\n<!--        [...document.querySelectorAll(\"[data-date]\")].forEach(el => countDown(el));-->\r\n<!--    </script>-->\r\n\r\n        <script>\r\n            $('#searchBtn').click(function (e){\r\n                const keyword = $('#keyword').val();\r\n                const ref = $(this).data('ref');\r\n                const newURl = ref + `&keyword=${keyword}`\r\n                $(this).attr('href', newURl);\r\n            })\r\n        </script>\r\n\r\n{{/section}}\r\n\r\n{{#section 'css'}}\r\n    <style>\r\n        .front{\r\n            z-index: 90 !important;\r\n        }\r\n\r\n        .back{\r\n            z-index: -1 !important;\r\n        }\r\n\r\n        .productElement:hover{\r\n            filter: alpha(opacity=80);\r\n            opacity: 0.8;\r\n        }\r\n\r\n        .mainThumb{\r\n            float:left;\r\n            width: 400px;\r\n            height: 400px;\r\n            object-fit: cover;\r\n        }\r\n    </style>\r\n{{/section}}\r\n\r\n <div class=\"container\">\r\n    <div class=\"card-header row front\">\r\n        <div class=\"col-md-6 mt-2\">\r\n            <div class=\"input-group\">\r\n                <div class=\"input-group-prepend\">\r\n                  <div class=\"input-group-text\" id=\"btnGroupAddon\">Hiển thị theo</div>\r\n                </div>\r\n                <div class=\"dropdow\">\r\n                    <button class=\"btn btn-secondary dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                        {{status}}\r\n                    </button>\r\n                    <div class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\" style=\"z-index: 90 !important;\">\r\n                        <a class=\"dropdown-item\" href=\"/seller/channel/product/{{this.initalPagePath}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}\">Tất cả</a>\r\n                        <a class=\"dropdown-item\" href=\"/seller/channel/product/{{this.initalPagePath}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}&status=1\">Đấu giá thành công</a>\r\n                        <a class=\"dropdown-item\" href=\"/seller/channel/product/{{this.initalPagePath}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}&status=2\">Đấu giá thất bại</a>\r\n                        <a class=\"dropdown-item\" href=\"/seller/channel/product/{{this.initalPagePath}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}&status=3\">Đang được đấu giá</a>\r\n                        <a class=\"dropdown-item\" href=\"/seller/channel/product/{{this.initalPagePath}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}&status=4\">Chưa được đấu giá</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"col-md-6 mt-2\">\r\n            <div class=\"input-group mb-3\">\r\n                <input type=\"text\" class=\"form-control\" placeholder=\"Product Name...\" name=\"keyword\" aria-describedby=\"button-addon2\" id=\"keyword\" value=\"\">\r\n\r\n                <div class=\"input-group-append\">\r\n                    <a class=\"btn btn-outline-secondary\"\r\n                       data-ref=\"/seller/channel/product/{{this.initalPagePath}}{{this.catParentPath}}{{this.catChildPath}}{{this.statusPath}}\"\r\n                       id=\"searchBtn\"\r\n                       href=\"\">\r\n                        Search\r\n                        <i class=\"fa fa-search\" aria-hidden=\"true\"></i>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n     <div class=\"row back\">\r\n         <div class=\"col-md-8\">\r\n             <nav class=\"navbar\" id=\"homePageNavbar\" role=\"navigation\" aria-label=\"dropdown navigation\">\r\n                 <a style=\"text-decoration:none\" class=\"navbar-link\" href=\"/seller/channel/product/{{this.initalPagePath}}{{this.statusPath}}\">\r\n                     <strong> Tất cả</strong>\r\n                 </a>\r\n                 {{#each this.categories}}\r\n                     <div class=\"navbar-item has-dropdown is-hoverable\">\r\n                         <a style=\"text-decoration:none \"\r\n                            class=\"navbar-link {{#if isActive}} btn btn-secondary {{/if}} \"\r\n                            href=\"/seller/channel/product/{{../initalPagePath}}{{../statusPath}}{{../keywordPath}}&catParent={{_id}}\">\r\n                         <strong> {{catParent}}</strong>\r\n                         </a>\r\n                         <div class=\"navbar-dropdown\">\r\n                             {{#each catChild}}\r\n                                 <a class=\"navbar-item {{#if isActive}} btn btn-secondary {{/if}}\" href=\"/seller/channel/product/{{../../initalPagePath}}{{../../this.statusPath}}{{../../this.keywordPath}}&catParent={{../_id}}&catChild={{@index}}\">\r\n                                 {{name}}\r\n                                 </a>\r\n                             {{/each}}\r\n                         </div>\r\n                     </div>\r\n                 {{/each}}\r\n             </nav>\r\n         </div>\r\n\r\n         <div class=\"col-md-4\">\r\n             <select class=\"select mt-2 w-100\" onchange=\"location = this.value;\">\r\n                 <option value=\"/seller/channel/product{{this.initalPagePath}}{{this.catParentPath}}{{this.keywordPath}}{{this.catChildPath}}{{this.statusPath}}&select=1\" selected>\r\n                     Sắp xếp theo thời gian\r\n                 </option>\r\n                 <option value=\"/seller/channel/product{{this.initalPagePath}}{{this.catParentPath}}{{this.keywordPath}}{{this.catChildPath}}{{this.statusPath}}&select=2\">\r\n                     Sắp xếp theo giá\r\n                 </option>\r\n             </select>\r\n         </div>\r\n     </div>\r\n\r\n     {{#if emptyMsg}}\r\n         <p class=\"text-danger h1\">{{emptyMsg}}</p>\r\n     {{else}}\r\n         <div class=\"row mt-3\" >\r\n             {{#each this.products}}\r\n                 <a class=\"col-xl-4 col-lg-6 p-3 clickElement productElement\" style=\"text-decoration: none\" href=\"/seller/channel/product/detail/{{_id}}\">\r\n                     <div class=\"card h-100\">\r\n                         <img src = \"/public/{{_id}}/{{mainThumb}}\"\r\n                              class=\"card-img-top mainThumb\"\r\n                              alt=\"Hình\"\r\n                              width=\"200\"\r\n                              height=\"200\">\r\n\r\n                         <div class=\"card-body d-flex flex-column justify-content-between\">\r\n                             <p class=\"h4 font-weight-bold\">{{proName}}</p>\r\n                             <p class=\"mt-5 text-secondary h5\">\r\n                                 {{catParent}} - {{catChild}}\r\n                             </p>\r\n                         </div>\r\n\r\n\r\n                         <div class=\"card-footer justify-content-between\">\r\n                             <p class=\"h5\">\r\n                                 <i class=\"fa fa-clock-o fa-2x\" aria-hidden=\"true\"></i>\r\n                                 <span class=\"countTime\" data-date=\"{{proEndDate}}\">\r\n                                     {{{format_duration proEndDate}}}\r\n                                 </span>\r\n                             </p>\r\n\r\n                             <p class=\"h4 mt-3\">\r\n                                 {{format_number proCurBidPrice}} ₫\r\n                             </p>\r\n                         </div>\r\n                     </div>\r\n                 </a>\r\n             {{/each}}\r\n\r\n         </div>\r\n\r\n         <nav class=\"pagination is-right is-rounded is-medium\" role=\"navigation\" aria-label=\"pagination\">\r\n             {{#if this.prevPage.check}}\r\n                 <a class=\"pagination-previous page-link\"\r\n                    style=\"text-decoration:none\"\r\n                    href=\"/seller/channel/product/?page={{this.prevPage.value}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}{{this.statusPath}}\">Previous page</a>\r\n             {{/if}}\r\n\r\n             {{#if this.nextPage.check}}\r\n                 <a class=\"pagination-next page-link\"\r\n                    style=\"text-decoration:none\"\r\n                    href=\"/seller/channel/product/?page={{this.nextPage.value}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}{{this.statusPath}}\">Next page</a>\r\n             {{/if}}\r\n\r\n             <ul class=\"pagination-list\">\r\n                 {{#if this.prevPage.check}}\r\n                     <li>\r\n                         <a class=\"pagination-link page-link\"\r\n                            style=\"text-decoration:none\"\r\n                            href=\"/seller/channel/product/?page={{this.prevPage.value}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}{{this.statusPath}}\">\r\n                         {{this.prevPage.value}}\r\n                         </a>\r\n                     </li>\r\n                 {{/if}}\r\n\r\n                 <li>\r\n                     <a style=\"text-decoration:none\" class=\"pagination-link is-current\">\r\n                         {{this.curPage.value}}\r\n                     </a>\r\n                 </li>\r\n\r\n                 {{#if this.nextPage.check}}\r\n                     <li>\r\n                         <a class=\"pagination-link page-link\"\r\n                            style=\"text-decoration:none\"\r\n                            href=\"/seller/channel/product/?page={{this.nextPage.value}}{{this.catParentPath}}{{this.catChildPath}}{{this.keywordPath}}{{this.statusPath}}\">\r\n                         {{this.nextPage.value}}\r\n                         </a>\r\n                     </li>\r\n                 {{/if}}\r\n             </ul>\r\n         </nav>\r\n     {{/if}}\r\n\r\n\r\n\r\n\r\n</div>\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/seller/channel_product.hbs b/views/seller/channel_product.hbs
--- a/views/seller/channel_product.hbs	(revision ac06e600f8d71e75de33aee05c4ae285ea074354)
+++ b/views/seller/channel_product.hbs	(date 1642080030528)
@@ -136,16 +136,16 @@
              </nav>
          </div>
 
-         <div class="col-md-4">
-             <select class="select mt-2 w-100" onchange="location = this.value;">
-                 <option value="/seller/channel/product{{this.initalPagePath}}{{this.catParentPath}}{{this.keywordPath}}{{this.catChildPath}}{{this.statusPath}}&select=1" selected>
-                     Sắp xếp theo thời gian
-                 </option>
-                 <option value="/seller/channel/product{{this.initalPagePath}}{{this.catParentPath}}{{this.keywordPath}}{{this.catChildPath}}{{this.statusPath}}&select=2">
-                     Sắp xếp theo giá
-                 </option>
-             </select>
-         </div>
+<!--         <div class="col-md-4">-->
+<!--             <select class="select mt-2 w-100" onchange="location = this.value;">-->
+<!--                 <option value="/seller/channel/product{{this.initalPagePath}}{{this.catParentPath}}{{this.keywordPath}}{{this.catChildPath}}{{this.statusPath}}&select=1" selected>-->
+<!--                     Sắp xếp theo thời gian-->
+<!--                 </option>-->
+<!--                 <option value="/seller/channel/product{{this.initalPagePath}}{{this.catParentPath}}{{this.keywordPath}}{{this.catChildPath}}{{this.statusPath}}&select=2">-->
+<!--                     Sắp xếp theo giá-->
+<!--                 </option>-->
+<!--             </select>-->
+<!--         </div>-->
      </div>
 
      {{#if emptyMsg}}
Index: routes/seller.route.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import express from 'express';\r\nimport modelProduct from '../models/product-model.js';\r\nimport modelCategory from '../models/category-model.js'\r\nimport multer  from 'multer'\r\nimport formatProduct from '../utils/format-product.js'\r\nimport fs from 'fs'\r\nimport path from 'path'\r\nimport page from \"../utils/page.js\";\r\nimport {ObjectId} from \"mongodb\";\r\nimport productModel from \"../models/product-model.js\";\r\nimport accountModel from \"../models/account-model.js\";\r\nimport mailing from \"../utils/mailing.js\";\r\nimport {authUserWithProduct} from \"../middlewares/auth-mdw.js\";\r\nimport rollbackProduct from \"../utils/rollback-product.js\";\r\nimport account from \"../models/account-model.js\";\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/channel\", async (req, res) => {\r\n    res.locals.ThongTinChung.isActive = true;\r\n    const userID =  res.locals.user._id;\r\n    const products = await modelProduct.getAll(userID);\r\n\r\n    //San pham thanh cong\r\n    let productCopy = [...products];\r\n    await formatProduct.findProductWithStatus(productCopy, \"1\");\r\n    const numberSuccess = productCopy.length;\r\n\r\n    let totalRevenue = 0;\r\n    for (const product of productCopy)\r\n        totalRevenue += product.proCurBidPrice;\r\n\r\n    //San pham thất bại\r\n    productCopy = [...products];\r\n    await formatProduct.findProductWithStatus(productCopy, \"2\");\r\n    const numberFail = productCopy.length;\r\n\r\n    //Sản phẩm chưa có người đặt\r\n    productCopy = [...products];\r\n    await formatProduct.findProductWithStatus(productCopy, \"4\");\r\n    const numberNoneBidder = productCopy.length;\r\n\r\n\r\n\r\n    res.render(\"./seller/channel\", {\r\n        layout: \"seller.layout.hbs\",\r\n        numberSuccess,\r\n        totalRevenue,\r\n        numberFail,\r\n        numberNoneBidder\r\n    })\r\n})\r\n\r\nrouter.get(\"/channel/product\", async (req, res) => {\r\n    res.locals.XemSanPham.isActive = true;\r\n    let products = null;\r\n    const categories = await modelCategory.getAll();\r\n\r\n\r\n    //Handle Category\r\n    const catParentFind = req.query.catParent;\r\n    const catChildFind = req.query.catChild;\r\n\r\n    for (const category of categories)\r\n        if (category._id == catParentFind){\r\n            category.isActive = true;\r\n            if (catChildFind !== undefined)\r\n                category.catChild[+catChildFind].isActive = true;\r\n            break;\r\n        }\r\n    //Search\r\n    let keyword = req.query.keyword;\r\n    //Taking products with id seller\r\n    const userID = res.locals.user._id;\r\n\r\n\r\n\r\n    //Find offset base on curPage\r\n    const choosenPage = req.query.page;\r\n    let limitProduct = 6;\r\n    let offset = ((+choosenPage - 1) * limitProduct) || 0;\r\n\r\n    //select\r\n    const select = req.query.select;\r\n    let searchWith = \"\";\r\n    if (select === \"1\")\r\n        searchWith = \"\"\r\n\r\n    if (keyword !== undefined)\r\n        products = await productModel.searchByType(keyword, 'name', limitProduct, offset, 'time-descending', catParentFind, catChildFind, userID);\r\n    else{\r\n            if (catParentFind != undefined && catChildFind != undefined)\r\n                products = await modelProduct.findByCategory(catParentFind, catChildFind, userID);\r\n            else if (catParentFind != undefined)\r\n                products = await modelProduct.findByCategoryParent(new ObjectId(catParentFind), undefined, userID);\r\n            else\r\n                products = await modelProduct.getAll(userID);\r\n    }\r\n\r\n    //Find with status product\r\n    let status = req.query.status;\r\n    if (status != undefined )\r\n        await formatProduct.findProductWithStatus(products, status);\r\n\r\n    if (status === \"1\")\r\n        status = \"Đấu giá thành công\"\r\n    else if (status === \"2\")\r\n        status = \"Đấu giá thất bại\"\r\n    else if (status === \"3\")\r\n        status = \"Đang được đấu giá\"\r\n    else if (status === \"4\")\r\n        status = \"Chưa được đấu giá\"\r\n    else\r\n        status = \"Tất cả\"\r\n\r\n    //Handle page\r\n    let nPage = Math.floor((products.length - 1) / 6) + 1;\r\n    let prevPage = {check:true, value : 0};\r\n    let nextPage = {check:true, value : 0};\r\n    let curPage = {check:true, value : 0};\r\n    await page.handlePage(prevPage, curPage, nextPage, choosenPage, nPage );\r\n\r\n    const numberProduct = products.length;\r\n    products = products.slice(offset, (offset + limitProduct  < numberProduct) ? offset + limitProduct : numberProduct)\r\n\r\n    const catParentPath = (req.query.catParent !== undefined) ?  `&catParent=${req.query.catParent}` : \"\";\r\n    const catChildPath =  (req.query.catChild !== undefined) ? `&catChild=${req.query.catChild}` : \"\";\r\n    const statusPath = (req.query.status !== undefined) ? `&status=${req.query.status}` : \"\";\r\n    const keywordPath = (req.query.keyword !== undefined) ? `&keyword=${req.query.keyword}` : \"\";\r\n    const pagePath = `?page=${(choosenPage) ? choosenPage : 1}`;\r\n    const initalPagePath = `?page=1`;\r\n\r\n    for (const product of products){\r\n        try{\r\n            const files = fs.readdirSync(`./public/${product._id}/`);\r\n            const mainThumb = files[0];\r\n            product.mainThumb = mainThumb;\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n\r\n    let emptyMsg;\r\n    if (products.length === 0)\r\n        emptyMsg = \"Hiện tại không có sản phẩm nào\"\r\n\r\n    res.render(\"./seller/channel_product\", {\r\n        layout: \"seller.layout.hbs\",\r\n        products,\r\n        categories,\r\n\r\n        status,\r\n        emptyMsg,\r\n\r\n        prevPage,\r\n        nextPage,\r\n        curPage,\r\n\r\n        catParentPath,\r\n        catChildPath,\r\n        statusPath,\r\n        keywordPath,\r\n        pagePath,\r\n        initalPagePath\r\n    })\r\n})\r\n\r\nrouter.get(\"/channel/product/insert\", async (req, res) => {\r\n    res.locals.ThemSanPham.isActive = true;\r\n    const catList = await modelCategory.getAll();\r\n    console.log(catList);\r\n\r\n    res.render(\"./seller/channel_product_insert_2\", {\r\n        layout: \"seller.layout.insert.hbs\",\r\n        catList\r\n    })\r\n})\r\n\r\n//Upload Image\r\nconst storage = multer.diskStorage({\r\n    destination: async function (req, file, cb) {\r\n        const dir = `./public/image`\r\n        if (!fs.existsSync(dir)){\r\n            fs.mkdirSync(dir, {recursive: true});\r\n            console.log(\"Create Folder\");\r\n        }\r\n        cb(null, `public/image`)\r\n    },\r\n    filename: async function (req, file, cb) {\r\n        if (req.body.index === undefined)\r\n            req.body.index = 0;\r\n\r\n        let index = req.body.index;\r\n\r\n        const ext = path.extname(file.originalname);\r\n        if (index === 0)\r\n            cb(null, `main-thumb${ext}`);\r\n        else\r\n            cb(null, `thumb${req.body.index}${ext}`);\r\n\r\n        req.body.index++;\r\n\r\n    }\r\n})\r\n\r\nconst upload = multer({ storage: storage })\r\nconst cpUpload = upload.array(\"Image[]\", 5);\r\n\r\nconst afterUploadImage = async (req, res, next) => {\r\n    console.log(\"Raw Data : \")\r\n    console.log(req.body);\r\n\r\n    req.body = await formatProduct.formatForInsert(req.body, res.locals.user._id);\r\n    await modelProduct.insertData(req.body);\r\n    console.log(req.body);\r\n    next();\r\n}\r\n\r\nrouter.post(\"/channel/product/insert\", cpUpload, afterUploadImage, async (req, res) => {\r\n    //Change folder name\r\n\r\n    req.body.index = undefined;\r\n\r\n    const oldFolderName = \"./public/image\";\r\n\r\n    const newFolderName = `./public/${req.body._id}`;\r\n\r\n    fs.rename(oldFolderName, newFolderName, async (err) => {\r\n        if (err){\r\n            console.log(\"Some thing Wrong !!\");\r\n        }\r\n\r\n        await modelProduct.updateDescription(req.body._id, req.body.proDescription);\r\n        res.redirect(`/seller/channel/product/detail/${req.body._id}`);\r\n    });\r\n\r\n})\r\n\r\n\r\nrouter.get(\"/channel/product/insert/review\", (req, res) => {\r\n    res.locals.ThemSanPham.isActive = true;\r\n    res.render(\"./seller/channel_product_insert_review\", {\r\n        layout: \"seller.layout.hbs\"\r\n    })\r\n})\r\n\r\nrouter.get(\"/channel/product/detail/:id\", authUserWithProduct, async function(req, res) {\r\n    const ProID = req.params.id;\r\n    const list =  await modelProduct.findById(ProID);\r\n    const product = list[0];\r\n    await formatProduct.formatCategory(product);\r\n\r\n    const status = await formatProduct.getStatus(product);\r\n    const isSuccess = (status === \"<span class='text-success'>Đấu giá thành công</span>\") ? true : false;\r\n\r\n\r\n    res.locals.XemSanPham.isActive = true;\r\n    res.locals.XemChiTiet.isActive = true;\r\n    let files = null;\r\n    let mainThumb = null;\r\n    try{\r\n        files = fs.readdirSync(`./public/${product._id}/`);\r\n        mainThumb = files[0];\r\n        files.splice(0, 1);\r\n    }catch(e){\r\n        console.log(e);\r\n    }\r\n\r\n\r\n\r\n    res.render(\"./seller/channel_product_detail\", {\r\n        layout: \"seller.layout.hbs\",\r\n        product,\r\n        status,\r\n        isSuccess,\r\n        files,\r\n        mainThumb\r\n    })\r\n})\r\n\r\nrouter.post(\"/channel/product/detail/:id\", async (req, res) => {\r\n    console.time(\"postTime\")\r\n    console.log(req.body);\r\n    const userID = req.body.userID;\r\n    let ProID = req.params.id;\r\n\r\n    let rate = null;\r\n    let comment = \"Người thằng không thanh toán\";\r\n    let isSuccess = false;\r\n\r\n    if (req.body.sellerComment !== undefined){\r\n        comment = req.body.sellerComment;\r\n        isSuccess = true;\r\n    }\r\n\r\n    if (req.body.score === '1') {\r\n        rate = true;\r\n    }\r\n    else if (req.body.score === '0'){\r\n        rate = false;\r\n    }\r\n    else\r\n        rate = false;\r\n\r\n    if (userID != undefined){\r\n        // if (!isSuccess)\r\n        //     await productModel.updateCurrenBidderInfor(ProID, null);\r\n        const updateProduct = {};\r\n        if (!isSuccess)\r\n            updateProduct.cancelTransaction = true;\r\n\r\n        updateProduct.isSellerComment = true;\r\n\r\n        await productModel.updateProduct(ProID, updateProduct);\r\n\r\n        // await productModel.updateSellerComment(ProID, true);\r\n\r\n        // Update lại commnet trong bidderHistory\r\n        const rawData = await accountModel.getCommentWithProID(ProID);\r\n        let commentOfProduct = rawData[0];\r\n        //----TH1 : Nếu như đã có rồi thì update lại thôi\r\n        if (rawData.length != 0){\r\n\r\n\r\n            commentOfProduct.sellerRate = rate;\r\n            commentOfProduct.sellerComment = comment;\r\n\r\n            await accountModel.updateCommentFromProID(commentOfProduct.proID, commentOfProduct);\r\n        }\r\n        //----Th2 : Nếu như chưa có thì phải tổng hợp dữ liệu để thêm vào\r\n        if (rawData.length === 0){\r\n\r\n            commentOfProduct = {};\r\n\r\n            commentOfProduct.proID = new ObjectId(ProID);\r\n            commentOfProduct.bidderComment = \"\";\r\n            commentOfProduct.sellerComment = comment;\r\n            commentOfProduct.bidderRate = false;\r\n            commentOfProduct.sellerRate = rate;\r\n            commentOfProduct.bidderID = new ObjectId(userID);\r\n            commentOfProduct.sellerID = new ObjectId(res.locals.user._id);\r\n\r\n            await accountModel.insertNewComment(commentOfProduct);\r\n        }\r\n    }\r\n    else{\r\n        let Message = req.body.proDescription;\r\n        Message =  `<p class=\"text-danger h3\"> ${new Date().toLocaleString(\"en-GB\")}</p> ${Message}`;\r\n\r\n\r\n        const dataProduct = await modelProduct.findById(ProID);\r\n        let insertedMessage = dataProduct[0].proDescription + Message;\r\n\r\n        console.log(\"Message : \" + req.body.proDescription);\r\n        console.log(\"inserted message : \" + insertedMessage);\r\n\r\n        await modelProduct.updateDescription(new ObjectId(ProID), insertedMessage);\r\n    }\r\n\r\n    console.timeEnd(\"postTime\")\r\n    res.redirect(`/seller/channel/product/detail/${ProID}`);\r\n\r\n})\r\n\r\nrouter.get(\"/channel/product/detail/:id/list\", authUserWithProduct, async (req, res) => {\r\n    res.locals.XemSanPham.isActive = true;\r\n\r\n    //Getting user data from bidderHistory\r\n    const productID = req.params.id;\r\n    let bidderHistory = await productModel.getBidderHistoryWithProID(productID);\r\n\r\n    //Handle page\r\n    let nPage = Math.floor((bidderHistory.length - 1) / 8) + 1;\r\n    const choosenPage = req.query.page;\r\n    let prevPage = {check:true, value : 0};\r\n    let nextPage = {check:true, value : 0};\r\n    let curPage = {check:true, value : 0};\r\n    await page.handlePage(prevPage, curPage, nextPage, choosenPage, nPage );\r\n\r\n\r\n    //Find offset base on curPage\r\n    let limitUser = 8;\r\n    let offset = ((+choosenPage - 1) * limitUser) || 0;\r\n    const numberUser = bidderHistory.length;\r\n    bidderHistory = bidderHistory.slice(offset, (offset + limitUser  < numberUser) ? offset + limitUser : numberUser)\r\n\r\n    let emptyMsg;\r\n    if (bidderHistory.length === 0)\r\n        emptyMsg = \"Hiện tại chưa có ai đặt sản phẩm của bạn\"\r\n\r\n    res.render(\"./seller/channel_product_detail_listBider\", {\r\n        layout: \"seller.layout.hbs\",\r\n        bidderHistory,\r\n        productID,\r\n        prevPage,\r\n        nextPage,\r\n        curPage,\r\n        emptyMsg\r\n    })\r\n})\r\n\r\nrouter.post(\"/channel/product/detail/:id/list\", authUserWithProduct, async (req, res) => {\r\n    console.time('test');\r\n    res.locals.XemSanPham.isActive = true;\r\n\r\n    //Getting user data from bidderHistory\r\n    const productID = req.params.id;\r\n    const userID = req.body.userID;\r\n\r\n    const productRaw = await productModel.findById(productID);\r\n    const product = productRaw[0];\r\n\r\n\r\n\r\n    const arr = await Promise.all([\r\n        rollbackProduct.denyBidderOfProduct(product, productID, userID),\r\n        async function (){\r\n            // Gửi mail\r\n            const account = await  accountModel.findByID(userID)\r\n            await mailing.sendEmail(account.email,\r\n                \"Thông báo từ chối ra giá\",\r\n                `Sản phẩm ${product.proName} mà bạn đã đặt mua hiện tại đã bị người bán từ chối ra giá . ` + `Chúng tôi rất tiếc khi phải thông báo việc này .`)\r\n\r\n            res.redirect(`/seller/channel/product/detail/${productID}/list`)\r\n\r\n        }\r\n    ]).then(arr => {\r\n        res.redirect(`/seller/channel/product/detail/${productID}/list`)\r\n        console.timeEnd('test');\r\n\r\n    })\r\n\r\n\r\n})\r\n\r\nrouter.get(\"/evaluate/:id\", async (req, res) => {\r\n    res.locals.DanhGia.isActive = true;\r\n    const id = req.params.id;\r\n    const userID = new ObjectId(id);\r\n    // let list = account.getCommentFromeSeller(await account.showAllComment(userID))\r\n    // const countList = Object.keys(list).length\r\n    // const countGoodComment = account.countGoodComment(list)\r\n    // let likeRate = 0;\r\n    // let dislikeRate = 0;\r\n    // if(countList != 0){\r\n    //     likeRate = Math.round(countGoodComment*1000.0/countList)/10\r\n    //     dislikeRate = Math.round((100 - likeRate)*10)/10\r\n    // }\r\n    // console.log(countList)\r\n    let commentList = await account.getCommentOfSeller(userID);\r\n    for (let i = commentList.length - 1; i >= 0; i--){\r\n        if (!commentList[i].details[0].isBidderComment )\r\n            commentList.splice(i, 1);\r\n        else{\r\n            try{\r\n                const files = fs.readdirSync(`./public/${commentList[i].details[0]._id}/`);\r\n                const mainThumb = files[0];\r\n                commentList[i].details[0].mainThumb = mainThumb;\r\n            } catch(e){\r\n                console.log(e);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    const countList = commentList.length;\r\n    let likeRate = 0;\r\n    let dislikeRate = 0;\r\n    for (const comment of commentList){\r\n        if (comment.bidderRate)\r\n            likeRate++;\r\n        else\r\n            dislikeRate++;\r\n    }\r\n\r\n\r\n\r\n\r\n    //List comment cua seller\r\n    //Tên Product\r\n    //Nội dung Comment tu Bidder\r\n    //Đánh giá của Bidder: bidderRate\r\n\r\n    res.render('viewAccountBidder/comment-from-seller', {\r\n        layout: \"seller.layout.hbs\",\r\n        product: commentList,\r\n        //--Product\r\n        //  --details\r\n        //    --ProName\r\n        //    --ProID\r\n        //  --bidderRate\r\n        total: countList,\r\n        likeRate: likeRate,\r\n        dislikeRate: dislikeRate\r\n    });\r\n\r\n})\r\n\r\n//API\r\nrouter.get(\"/channel/getCatChild\", async (req, res) => {\r\n    const id = req.query.catParentID;\r\n    const catChildList = await modelCategory.getCatChild(id);\r\n    res.json(catChildList[0].catChild);\r\n})\r\n\r\nrouter.post(\"/channel/updateEndDate\", async (req, res) => {\r\n\r\n})\r\n\r\nrouter.post(\"/test\", async(req, res) => {\r\n    console.log(\"--------------------------\");\r\n    console.log(\"req.body\");\r\n    console.log(req.body);\r\n    console.log(\"---------------------------\");\r\n    console.log(\"req.files\");\r\n    console.log(req.files);\r\n    console.log(\"---------------------------\");\r\n\r\n})\r\nexport default router;
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/routes/seller.route.js b/routes/seller.route.js
--- a/routes/seller.route.js	(revision ac06e600f8d71e75de33aee05c4ae285ea074354)
+++ b/routes/seller.route.js	(date 1642077978669)
@@ -302,7 +302,7 @@
     else
         rate = false;
 
-    if (userID != undefined){
+    if (userID != undefined){ // Đánh giá
         // if (!isSuccess)
         //     await productModel.updateCurrenBidderInfor(ProID, null);
         const updateProduct = {};
@@ -342,8 +342,28 @@
 
             await accountModel.insertNewComment(commentOfProduct);
         }
+
+        //Update score
+        const commentHistory = await accountModel.getCommentFromBidder(new ObjectId(userID));
+        const score = {};
+
+        let goodScore = 0, badScore = 0;
+
+        for (const comment of commentHistory)
+            if (comment.sellerComment !== ""){
+                if (comment.sellerRate)
+                    goodScore++;
+                else
+                    badScore++;
+            }
+
+        score.goodScore = (goodScore) / (goodScore + badScore);
+        score.badScore =  (badScore) / (goodScore + badScore);
+
+        await accountModel.updateScore(userID, score);
+
     }
-    else{
+    else{ // Thêm mô tả sản phẩm
         let Message = req.body.proDescription;
         Message =  `<p class="text-danger h3"> ${new Date().toLocaleString("en-GB")}</p> ${Message}`;
 
Index: testDB.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import productModel from \"./models/product-model.js\";\r\nimport {ObjectId} from \"mongodb\";\r\nimport accountModel from \"./models/account-model.js\";\r\nimport mailing from \"./utils/mailing.js\";\r\nimport modelCategory from \"./models/category-model.js\";\r\nimport bid from \"./routes/bid.js\";\r\n\r\n\r\n\r\nasync function testFunc(){\r\n    const data = await accountModel.getAccount(new ObjectId(\"61b9df48a38388efc7a19cf8\"));\r\n    console.log(data);\r\n}\r\n\r\nawait testFunc();\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/testDB.js b/testDB.js
--- a/testDB.js	(revision ac06e600f8d71e75de33aee05c4ae285ea074354)
+++ b/testDB.js	(date 1642077892021)
@@ -8,8 +8,12 @@
 
 
 async function testFunc(){
-    const data = await accountModel.getAccount(new ObjectId("61b9df48a38388efc7a19cf8"));
-    console.log(data);
+    const score  = {
+        goodScore: 2,
+        badScore: 1
+    }
+    await accountModel.updateScore("61b9df48a38388efc7a19cf8", score);
+    // console.log(data);
 }
 
 await testFunc();
Index: models/account-model.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import mongoClient from '../utils/db.js'\r\nimport { ObjectId } from \"mongodb\";\r\nimport productMD from \"./product-model.js\";\r\n\r\nconst list = [\r\n    {productID: 0, name: 'bàn gỗ 1fffffffffffffffffffffffff'},\r\n    {productID: 1, name: 'bàn gỗ 2'},\r\n    {productID: 2, name: 'bàn gỗ 3'},\r\n    {productID: 3, name: 'bàn gỗ 4'},\r\n];\r\n\r\nasync function findByIDFunc(collection, userID,proID){\r\n    return collection.findOne({userID: new ObjectId(userID), proID: new ObjectId(proID)})\r\n}\r\n\r\nasync function showFavoriteListFunc(collection, id) {\r\n    return await collection.aggregate([\r\n        { $match: { userID: new ObjectId(id) } },\r\n        { $lookup:\r\n                {\r\n                    from: 'product',\r\n                    localField: 'proID',\r\n                    foreignField: '_id',\r\n                    as: 'details'\r\n                }\r\n        }\r\n    ]).toArray();\r\n}\r\n\r\nasync function showBidderHistoryFunc(collection, id) {\r\n    // let time = moment().format();\r\n    return await collection.aggregate([\r\n        { $match: { userID: new ObjectId(id) } },\r\n        { $lookup:\r\n                {\r\n                    from: 'product',\r\n                    localField: 'proID',\r\n                    foreignField: '_id',\r\n                    as: 'details'\r\n                }\r\n        }\r\n    ]).toArray();\r\n}\r\n\r\nasync function showAllCommentFunc(collection, id) {\r\n    // let time = moment().format();\r\n    return await collection.aggregate([\r\n        { $match: { bidderID: id } },\r\n        { $lookup:\r\n                {\r\n                    from: 'product',\r\n                    localField: 'proID',\r\n                    foreignField: '_id',\r\n                    as: 'details'\r\n                }\r\n        }\r\n    ]).toArray();\r\n}\r\n\r\nasync function getCommentWithProIDFunc(collection, ProID) {\r\n    // let time = moment().format();\r\n    return await collection.aggregate([\r\n        { $match: { \"proID\": new ObjectId(ProID) } }\r\n    ]).toArray();\r\n}\r\n\r\n\r\n// async function showFavoriteListFunc(collection, id) {\r\n//     let userFavorite = await collection.find({userID: id},{}).toArray();\r\n//     userFavorite.list\r\n// }\r\n\r\nasync function deleteOneFavoriteFunc(collection, userID, proID) {\r\n    return collection.findOneAndDelete({userID: new ObjectId(userID),proID: new ObjectId(proID)})\r\n}\r\n\r\nasync function addOneFavoriteFunc(collection, userID, proID) {\r\n    return collection.insertOne({userID: new ObjectId(userID),proID: new ObjectId(proID)})\r\n}\r\n\r\nasync function bidderCommentFunc(dbo,collection, userID, proID, productDetail,rate, comment) {\r\n    if(productDetail.isBidderComment)\r\n        return\r\n    const check = await collection.findOne({proID: proID});\r\n    if(check === null) {\r\n        dbo.collection('product').findOneAndUpdate({_id: new ObjectId(proID)}, {$set: {isBidderComment: true}})\r\n        return collection.insertOne({\r\n            proID: new ObjectId(proID),\r\n            bidderComment: comment,\r\n            sellerComment: \"\",\r\n            bidderRate: rate,\r\n            sellerRate: false,\r\n            bidderID: new ObjectId(userID),\r\n            sellerID: productDetail.sellerInfo[0]._id\r\n        })\r\n    }\r\n    else{\r\n        dbo.collection('product').updateOne({_id: new ObjectId(proID)}, {$set: {isBidderComment: true}})\r\n        return collection.updateOne({proID: new ObjectId(proID)}, {$set: {bidderComment: comment, bidderRate: rate}})\r\n    }\r\n}\r\n\r\nasync function countTotalAccountFunc(collection, role, keyword) {\r\n    if(role)\r\n        return await collection.find({role: role}).count();\r\n    else if(keyword) {\r\n        const result = await collection.aggregate([\r\n            {\r\n                '$search':{\r\n                    'index': 'custom1',\r\n                    'text': {\r\n                        'query': keyword,\r\n                        'path': 'email',\r\n                        'fuzzy': {}\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                $count: 'total'\r\n            }]).toArray();\r\n        if(result.length === 0)\r\n            return 0;\r\n        return result[0].total;\r\n    }\r\n    else\r\n        return await collection.find().count();\r\n}\r\n\r\nasync function getLimitAccountFunc(collection, limit, offset, role, keyword) {\r\n    if(role)\r\n        return await collection.find({role: role}).skip(offset).limit(limit).toArray()\r\n    else if(keyword) {\r\n        return await collection.aggregate([\r\n            {\r\n                '$search':{\r\n                    'index': 'custom1',\r\n                    'text': {\r\n                        'query': keyword,\r\n                        'path': 'email',\r\n                        'fuzzy': {}\r\n                    }\r\n                }\r\n            }]).skip(offset).limit(limit).toArray();\r\n    }\r\n    else\r\n        return await collection.find().skip(offset).limit(limit).toArray()\r\n}\r\n\r\nasync function lockAccountFunc(collection, id) {\r\n    await collection.updateOne({_id: new ObjectId(id)}, {$set: {verified: false}});\r\n}\r\n\r\nasync function downgradeAccountFunc(collection, id) {\r\n    await collection.updateOne({_id: new ObjectId(id)}, {$set: {role: 'bidder'}});\r\n}\r\n\r\nasync function unlockAccountFunc(collection, id) {\r\n    await collection.updateOne({_id: new ObjectId(id)}, {$set: {verified: true}});\r\n}\r\n\r\nasync function getLimitUpgradeListFunc(collection, limit, offset) {\r\n    return await collection.aggregate([\r\n        {\r\n            $lookup: {\r\n                from: 'account',\r\n                localField: 'userID',\r\n                foreignField: '_id',\r\n                as: 'info'\r\n            }\r\n        }\r\n    ]).toArray();\r\n}\r\n\r\nasync function countTotalUpgradeListFunc(collection) {\r\n    return await collection.find().count();\r\n}\r\n\r\nasync function upgradeAccountFunc(collection, id) {\r\n    await collection.updateOne({_id: new ObjectId(id)}, {$set: {role: 'seller'}});\r\n}\r\n\r\nasync function deleteUpgradeRequestFunc(collection, id) {\r\n    return await collection.findOneAndDelete({userID: new ObjectId(id)});\r\n}\r\n\r\nasync function deleteAccountFunc(collection, id) {\r\n    return await collection.findOneAndDelete({_id: new ObjectId(id)});\r\n}\r\n\r\n// <<<<<<< Updated upstream\r\nasync function updateCommentFromProID(collection, proID, commentData){\r\n    const myQuery = { proID : proID};\r\n    const newValues = { $set:\r\n            {\r\n                bidderComment: commentData.bidderComment,\r\n                sellerComment: commentData.sellerComment,\r\n                bidderRate: commentData.bidderRate,\r\n                sellerRate: commentData.sellerRate,\r\n                bidderID: commentData.bidderID,\r\n                sellerID: commentData.sellerID\r\n            }\r\n    };\r\n    await collection.updateOne(myQuery, newValues);\r\n}\r\n\r\nasync function insertNewCommentFunc(collection, commentOfProduct){\r\n    await collection.insertOne(commentOfProduct);\r\n}\r\n\r\n// =======\r\nasync function getInforBidderAccountFunc(collection, id) {\r\n    return await collection.findOne({_id: new ObjectId(id)});\r\n}\r\n\r\nasync function updateBidderInforFunc(collection, userID, newName, newAddress) {\r\n\r\n    return collection.findOneAndUpdate({_id: new ObjectId(userID)}, {$set: {name: newName, address: newAddress}})\r\n}\r\nasync function updateBidderPassFunc(collection, userID, newPass) {\r\n    return collection.findOneAndUpdate({_id: new ObjectId(userID)}, {$set: {pass: newPass}})\r\n}\r\nasync function findByUserIDFunc(collection, userID){\r\n    return await collection.findOne({_id :  new ObjectId(userID)});\r\n}\r\n\r\nasync function sendUpgradeSellerFunc(collection, userID) {\r\n    const isDuplicate = await collection.findOne({userID: new ObjectId(userID)})\r\n    console.log(isDuplicate)\r\n    if(isDuplicate === null){\r\n        await collection.insertOne({\r\n                userID: new ObjectId(userID),\r\n                date: new Date()\r\n            })\r\n        return true\r\n    }\r\n    else\r\n        return false\r\n\r\n    // return collection.insertOne({\r\n    //     dateBid: new Date(),\r\n    //     price: price,\r\n    //     curProPrice: curProPrice.toString(),\r\n    //     userID: new ObjectId(userID),\r\n    //     proID: new ObjectId(proID),\r\n    //     isDenied: 0\r\n    // })\r\n}\r\n\r\nasync function getTotalBidFunc(collection, id) {\r\n    return await collection.find({userID: new ObjectId(id)}).count();\r\n}\r\n\r\nasync function getTotalProductFunc(collection, id) {\r\n    return await collection.find({curBidderInfo: new ObjectId(id)}).count();\r\n}\r\n\r\nasync function getCommentOfSellerFunc(collection, userID){\r\n    return await collection.aggregate([\r\n        { $match: { sellerID: userID } },\r\n        { $lookup:\r\n                {\r\n                    from: 'product',\r\n                    localField: 'proID',\r\n                    foreignField: '_id',\r\n                    as: 'details'\r\n                }\r\n        }\r\n    ]).toArray();\r\n}\r\n\r\nasync function getAccountFunc(collection, userID){\r\n    return await collection.findOne({\"_id\" : userID});\r\n}\r\n\r\n\r\n// >>>>>>> Stashed changes\r\nexport default {\r\n    async findByID(userID){\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await findByUserIDFunc(collection, userID);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async showFavoriteList(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('favoriteList');\r\n            return await showFavoriteListFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    getProductsOnAuction (list){\r\n        let listTemp = [];\r\n        console.log(list)\r\n        list.forEach(function (e) {\r\n            if(e.details.length !== 0){\r\n                let date = new Date()\r\n                if(e.details[0].proEndDate.getTime() > date.getTime())\r\n                    listTemp.push(e)\r\n            }\r\n\r\n        })\r\n        return listTemp;\r\n    },\r\n    getSuccessfulAuction(userID,list){\r\n        let listTemp = [];\r\n        console.log(list)\r\n        list.forEach(function (e) {\r\n            if(e.details.length != 0){\r\n                var date = new Date()\r\n                if( e.details[0].proEndDate.getTime() <= date.getTime()&& e.details[0].curBidderInfo.toString() ===  userID)\r\n                    listTemp.push(e)\r\n\r\n            }\r\n\r\n        })\r\n        return listTemp;\r\n    },\r\n    removeDuplicatesHistory(list){\r\n        let listTemp = [];\r\n        console.log(list)\r\n        list.forEach(function (e) {\r\n            let check =0;\r\n            for(var i =0; i < listTemp.length; i++){\r\n                if(e.proID.toString() === listTemp[i].proID.toString()){\r\n                    check = 1;\r\n                    break\r\n                }\r\n            }\r\n            if(check === 0)\r\n                listTemp.push(e)\r\n        })\r\n        return listTemp;\r\n    },\r\n    async deleteOneFavorite(userID, proID) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('favoriteList');\r\n            await deleteOneFavoriteFunc(collection, userID, proID);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async addOneFavorite(userID, proID) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('favoriteList');\r\n            const check = await findByIDFunc(collection, userID, proID);\r\n            console.log(check)\r\n            if(check  === null ){\r\n                await addOneFavoriteFunc(collection, userID, proID);\r\n            };\r\n\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async showBidderHistory(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('bidderHistory');\r\n            // await collection.deleteMany({})\r\n            return await showBidderHistoryFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close();\r\n        }\r\n    },\r\n    async getInforBidderAccount(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await getInforBidderAccountFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close();\r\n        }\r\n    },\r\n    async updateBidderInfor(id, newName, newAddress) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await updateBidderInforFunc(collection, id, newName, newAddress);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close();\r\n        }\r\n    },\r\n    async updateBidderPass(id, newPass) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await updateBidderPassFunc(collection, id, newPass);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close();\r\n        }\r\n    },\r\n    async bidderComment(userID, proID,productDetail,rate,comment ) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('comment');\r\n            await bidderCommentFunc(db,collection,userID, proID,productDetail,rate,comment);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async showAllComment(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('comment');\r\n            return await showAllCommentFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async getCommentWithProID(ProID) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('comment');\r\n            return await getCommentWithProIDFunc(collection, ProID);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    getCommentFromeSeller(list) {\r\n        var commentFromeSellerList = []\r\n        list.forEach(function (e){\r\n            if(e.details[0].isSellerComment)\r\n                commentFromeSellerList.push(e)\r\n        })\r\n        return commentFromeSellerList;\r\n    },\r\n    countGoodComment(list) {\r\n        var countGoodComment = 0\r\n        list.forEach(function (e){\r\n            if(e.sellerRate)\r\n                countGoodComment++\r\n        })\r\n        return countGoodComment;\r\n    },\r\n    async countTotalAccount(role, keyword) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await countTotalAccountFunc(collection, role, keyword);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async getLimitAccount(limit, offset, role, keyword) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await getLimitAccountFunc(collection, limit, offset, role, keyword);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async lockAccount(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await lockAccountFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async downgradeAccount(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await downgradeAccountFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async unlockAccount(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await unlockAccountFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async getLimitUpgradeList(limit, offset) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('updateList');\r\n            return await getLimitUpgradeListFunc(collection, limit, offset);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async countTotalUpgradeList() {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('updateList');\r\n            return await countTotalUpgradeListFunc(collection);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async upgradeAccount(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await upgradeAccountFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async deleteUpgradeRequest(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('updateList');\r\n            return await deleteUpgradeRequestFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async deleteAccount(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await deleteAccountFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async getTotalBid(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('bidderHistory');\r\n            return await getTotalBidFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async getTotalProduct(id) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('product');\r\n            return await getTotalProductFunc(collection, id);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n// <<<<<<< Updated upstream\r\n    async updateCommentFromProID(proID, commentData) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('comment');\r\n            return await updateCommentFromProID(collection, proID, commentData);\r\n\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    // =======\r\n\r\n// >>>>>>> Stashed changes\r\n// <<<<<<< Updated upstream\r\n    async insertNewComment(commentOfProduct) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('comment');\r\n            return await insertNewCommentFunc(collection, commentOfProduct);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async sendUpgradingSeller(userID) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('updateList');\r\n            if(await sendUpgradeSellerFunc(collection, userID))\r\n                return true\r\n            return false\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n// =======\r\n// >>>>>>> Stashed changes\r\n    async getCommentOfSeller(userID) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('comment');\r\n            return await getCommentOfSellerFunc(collection, userID);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    },\r\n    async getAccount(userID) {\r\n        try {\r\n            await mongoClient.connect();\r\n            const db = mongoClient.db('onlineauction');\r\n            const collection = db.collection('account');\r\n            return await getAccountFunc(collection, userID);\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            await mongoClient.close()\r\n        }\r\n    }\r\n}\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/models/account-model.js b/models/account-model.js
--- a/models/account-model.js	(revision ac06e600f8d71e75de33aee05c4ae285ea074354)
+++ b/models/account-model.js	(date 1642077950782)
@@ -268,10 +268,22 @@
     ]).toArray();
 }
 
+async function getCommentFromBidderFunc(collection, userID){
+    return await collection.aggregate([
+        { $match: { bidderID: userID } }
+    ]).toArray();
+}
+
 async function getAccountFunc(collection, userID){
     return await collection.findOne({"_id" : userID});
 }
 
+async function updateScoreFunc(collection, userID, score){
+    const query = {_id : new ObjectId(userID)};
+    const newValue = {$set : score};
+    await collection.updateOne(query, newValue);
+}
+
 
 // >>>>>>> Stashed changes
 export default {
@@ -684,6 +696,30 @@
             console.error(e);
         } finally {
             await mongoClient.close()
+        }
+    },
+    async getCommentFromBidder(userID) {
+        try {
+            await mongoClient.connect();
+            const db = mongoClient.db('onlineauction');
+            const collection = db.collection('comment');
+            return await getCommentFromBidderFunc(collection, userID);
+        } catch (e) {
+            console.error(e);
+        } finally {
+            await mongoClient.close()
+        }
+    },
+    async updateScore(userID, score) {
+        try {
+            await mongoClient.connect();
+            const db = mongoClient.db('onlineauction');
+            const collection = db.collection('account');
+            return await updateScoreFunc(collection, userID, score);
+        } catch (e) {
+            console.error(e);
+        } finally {
+            await mongoClient.close()
         }
     }
 }
