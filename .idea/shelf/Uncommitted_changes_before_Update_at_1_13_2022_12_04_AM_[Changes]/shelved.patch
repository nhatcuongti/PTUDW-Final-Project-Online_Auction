Index: views/viewAccountBidder/comment-from-bidder.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{{#section 'js'}}\r\n    <script>\r\n        $('#homePageNavbar').hide();\r\n\r\n    </script>\r\n{{/section}}\r\n<div class=\"container-fluid min-vh-100\">\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-3 has-background-grey-lighter\">\r\n            <ul class=\"nav flex-column\">\r\n                <div class=\"h4 text-center ml-auto mr-auto p-4\">Hồ sơ</div>\r\n                <li class=\"nav-item\">\r\n                    <div class=\"h6 text-center\">Điểm đánh giá: {{this.total}}</div>\r\n                </li>\r\n                <li class=\"nav-item\">\r\n                    <div class=\"h6 text-center\">Đánh giá tích cực: {{this.likeRate}}%</div>\r\n                </li>\r\n                <li class=\"nav-item\">\r\n                    <div class=\"h6 text-center\">Đánh giá tiêu cực: {{this.dislikeRate}}%</div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"col-sm-9\">\r\n            {{#each this.product}}\r\n                {{#each details}}\r\n                <div class=\"card mb-2 ml-auto mr-auto\" style=\"width: 70vw;\">\r\n                    <div class=\"row no-gutters\">\r\n                        <div class=\"col-md-2\">\r\n                            <img src=\"/public/{{_id}}/{{mainThumb}}\" class=\"card-img\" alt=\"...\">\r\n                        </div>\r\n                        <div class=\"col-md-9\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title\"><strong>{{proName}}</strong></h5>\r\n                {{/each}}\r\n\r\n                                <p class=\"card-text\">Nội dung: {{bidderComment}}</p>\r\n<!--                                <div class=\"d-flex\">-->\r\n<!--                                    <p class=\"card-text\"><small class=\"text-muted\">sellerRate</small></p>-->\r\n<!--&lt;!&ndash;                                    <div class=\"flex-fill\"><a href=\"#\"><button class=\"btn btn-primary float-right\" aria-hidden=\"true\">Nhận xét</button></a></div>&ndash;&gt;-->\r\n<!--                                </div>-->\r\n                            </div>\r\n                        </div>\r\n                        {{#if bidderRate}}\r\n                            <div class=\"col-md-1\">\r\n                                <i class=\"fa fa-thumbs-o-up fa-4x mt-lg-3\" aria-hidden=\"true\"></i>\r\n                            </div>\r\n                        {{else}}\r\n                            <div class=\"col-md-1\">\r\n                                <i class=\"fa fa-thumbs-o-down fa-4x mt-lg-3\" aria-hidden=\"true\"></i>\r\n                            </div>\r\n                        {{/if}}\r\n\r\n                    </div>\r\n                </div>\r\n                {{else}}\r\n                <p class=\"h4 text-center mt-5\">Chưa có đánh giá nào từ người bán</p>\r\n            {{/each}}\r\n        </div>\r\n\r\n    </div>\r\n</div>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/viewAccountBidder/comment-from-bidder.hbs b/views/viewAccountBidder/comment-from-bidder.hbs
--- a/views/viewAccountBidder/comment-from-bidder.hbs	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/views/viewAccountBidder/comment-from-bidder.hbs	(date 1642005725960)
@@ -3,59 +3,77 @@
         $('#homePageNavbar').hide();
 
     </script>
+
+    <style>
+        .card-img{
+            max-height: 100%;
+            max-width: 100%;
+        }
+    </style>
 {{/section}}
 <div class="container-fluid min-vh-100">
     <div class="row">
-        <div class="col-sm-3 has-background-grey-lighter">
+        <div class="col-sm-3 has-background-grey-lighter" style="background: #1b1e21; height: 100vh; padding: 5px" >
             <ul class="nav flex-column">
-                <div class="h4 text-center ml-auto mr-auto p-4">Hồ sơ</div>
+                <div class="h3 text-center ml-auto mr-auto p-4" style="color: #FFFFFF">Hồ sơ</div>
+                <hr class="navbar-divider">
+
                 <li class="nav-item">
-                    <div class="h6 text-center">Điểm đánh giá: {{this.total}}</div>
+                    <div class="h4 p-5"  style="background: #FFFFFF; padding: 10px">Điểm đánh giá: {{this.total}}</div>
                 </li>
                 <li class="nav-item">
-                    <div class="h6 text-center">Đánh giá tích cực: {{this.likeRate}}%</div>
+                    <div class="h4 p-5"  style="background: #FFFFFF; padding: 10px">Đánh giá tích cực: {{this.likeRate}}%</div>
                 </li>
                 <li class="nav-item">
-                    <div class="h6 text-center">Đánh giá tiêu cực: {{this.dislikeRate}}%</div>
+                    <div class="h4 p-5"  style="background: #FFFFFF; padding: 10px">Đánh giá tiêu cực: {{this.dislikeRate}}%</div>
                 </li>
             </ul>
         </div>
         <div class="col-sm-9">
+        <p class="container-fluid">
+
             {{#each this.product}}
                 {{#each details}}
-                <div class="card mb-2 ml-auto mr-auto" style="width: 70vw;">
-                    <div class="row no-gutters">
-                        <div class="col-md-2">
-                            <img src="/public/{{_id}}/{{mainThumb}}" class="card-img" alt="...">
-                        </div>
-                        <div class="col-md-9">
-                            <div class="card-body">
-                                <h5 class="card-title"><strong>{{proName}}</strong></h5>
-                {{/each}}
-
-                                <p class="card-text">Nội dung: {{bidderComment}}</p>
-<!--                                <div class="d-flex">-->
-<!--                                    <p class="card-text"><small class="text-muted">sellerRate</small></p>-->
-<!--&lt;!&ndash;                                    <div class="flex-fill"><a href="#"><button class="btn btn-primary float-right" aria-hidden="true">Nhận xét</button></a></div>&ndash;&gt;-->
-<!--                                </div>-->
-                            </div>
-                        </div>
-                        {{#if bidderRate}}
-                            <div class="col-md-1">
-                                <i class="fa fa-thumbs-o-up fa-4x mt-lg-3" aria-hidden="true"></i>
-                            </div>
-                        {{else}}
-                            <div class="col-md-1">
-                                <i class="fa fa-thumbs-o-down fa-4x mt-lg-3" aria-hidden="true"></i>
-                            </div>
-                        {{/if}}
-
-                    </div>
-                </div>
-                {{else}}
-                <p class="h4 text-center mt-5">Chưa có đánh giá nào từ người bán</p>
+                    <div class="d-flex justify-content-center">
+                        <div class="product mb-2 ml-auto mr-auto border" style="width: 70vw">
+                            <div class="row no-gutters">
+                                <div class="col-md-4">
+                                    <img src="/public/{{_id}}/main-thumb.jpg" class="card-img" alt="...">
+                                </div>
+                                <div class="col-md-7">
+                                    <div class="card-body h-50">
+                                        <div class="d-flex">
+                                            <span class="h5 product-name"><strong>{{proName}}</strong></span>
+                                            <span class="flex-fill">
+                                            </span>
+                                        </div>
+                                        <p class="card-text">Nội dung: {{../bidderComment}}</p>
+                                    </div>
+                                    <div class="card-footer h-50">
+                                        <a class="d-flex flex-row-reverse p-3 h-100 w-100" href="/product/{{_id}}"><button class="d-flex flex-column align-self-end btn btn-primary is-rounded" aria-hidden="true">Xem sản phẩm</button> </a>
+                                    </div>
+                                </div>
+
+                                {{#if ../bidderRate}}
+                                    <div class="col-md-1">
+                                        <i class="fa fa-thumbs-o-up fa-4x mt-lg-3" aria-hidden="true"></i>
+                                    </div>
+                                {{else}}
+                                    <div class="col-md-1">
+                                        <i class="fa fa-thumbs-o-down fa-4x mt-lg-3" aria-hidden="true"></i>
+                                    </div>
+                                {{/if}}
+                            </div>
+                        </div>
+                    </div>
+                {{/each}}
+            {{else}}
+                <hr class="navbar-divider">
+                <div class="h4 text-center mt-5 mb-5">Hiện tại bạn chưa có sản phẩm yêu thích nào</div>
             {{/each}}
         </div>
+        </p>
+    </div>
 
-    </div>
+</div>
 </div>
\ No newline at end of file
Index: views/detail.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{{#section 'js'}}\r\n    <script>\r\n        $('.addItemFavorite').on('click', function (e){\r\n            const id = $(this).data('id');\r\n            $('#txtProID').val(id);\r\n            $('#formAddFavorite').submit();\r\n        });\r\n        // $('.bidBtn').on('click', function (e){\r\n        //     e.preventDefault();\r\n        // })\r\n\r\n        $('.buyNow').on('click', function (e){\r\n            const id = $(this).data('id');\r\n            $.getJSON(`/bid/check-buynow?id=${id}`, function (data) {\r\n                if (data === false) {\r\n                    $('#exampleModalCenter').modal('show')\r\n                }\r\n                else {\r\n                    $('#confirmModal').modal('show')\r\n                    $('#confirm').on('click', function (e){\r\n                        $('#confirmModal').modal('toggle')\r\n                        $('#txtProIDforBuyNow').val(id);\r\n                        $('#formBuyNow').submit();\r\n                    });\r\n\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n{{/section}}\r\n{{#section 'css'}}\r\n    <style>\r\n        body {\r\n            padding-right: 0px !important;\r\n        }\r\n        .modal-backdrop {\r\n            z-index: -1;\r\n        }\r\n    </style>\r\n{{/section}}\r\n\r\n<form action=\"/user/favorite/add\" method=\"post\" id=\"formAddFavorite\">\r\n    <input type=\"text\" name=\"id\" id=\"txtProID\" hidden>\r\n</form>\r\n<form action=\"/bid/buynow\" method=\"post\" id=\"formBuyNow\">\r\n    <input type=\"text\" name=\"id\" id=\"txtProIDforBuyNow\" hidden>\r\n</form>\r\n\r\n{{#each this.proInfo}}\r\n    {{!--\r\n    <div class=\"row\">\r\n        <div class=\"col-1\"></div>\r\n        <div class=\"col-5\">\r\n          <div id=\"carouselExampleIndicators\" class=\"carousel slide\" data-ride=\"carousel\">\r\n            <ol class=\"carousel-indicators\">\r\n              <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" class=\"active\"></li>\r\n              <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\r\n              <li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\r\n            </ol>\r\n            <div class=\"carousel-inner\">\r\n                <div class=\"carousel-item active\">\r\n                    <img class=\"d-block w-100\" src=\"/public/{{_id}}/{{../mainThumb}}\" alt=\"slide\">\r\n                </div>\r\n\r\n                {{#each ../files}}\r\n                    <div class=\"carousel-item\">\r\n                        <img class=\"d-block w-100\" src=\"/public/{{../_id}}/{{this}}\" alt=\"slide\">\r\n                    </div>\r\n                {{/each}}\r\n            </div>\r\n            <button class=\"carousel-control-prev\" type=\"button\" data-target=\"#carouselExampleIndicators\" data-slide=\"prev\">\r\n              <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n              <span class=\"sr-only\">Previous</span>\r\n            </button>\r\n            <button class=\"carousel-control-next\" type=\"button\" data-target=\"#carouselExampleIndicators\" data-slide=\"next\">\r\n              <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n              <span class=\"sr-only\">Next</span>\r\n            </button>\r\n          </div>\r\n            {{#if ../historyList}}\r\n\r\n            <table class=\"table table-striped mt-lg-5 border\">\r\n                <thead class=\"thead-dark\">\r\n                <tr>\r\n                    <th scope=\"col\">Thời điểm</th>\r\n                    <th scope=\"col\">Người mua</th>\r\n                    <th scope=\"col\">Giá</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {{#each ../historyList}}\r\n                <tr>\r\n                    <td>{{dateBid}}</td>\r\n                    <td>{{sellerInfo}}</td>\r\n                    <td>{{format_number curProPrice}}</td>\r\n                </tr>\r\n                {{/each}}\r\n\r\n            </table>\r\n            {{/if}}\r\n\r\n\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <p class=\"h3\">{{proName}}</p>\r\n          <p>{{{proDescription}}}</p>\r\n          <div class=\"row\">\r\n            <div class=\"col-6 mt-3\">\r\n            {{#each sellerInfo}}\r\n                <p><strong>Thông tin người bán: {{email}}</strong></p>\r\n            {{/each}}\r\n            </div>\r\n            <div class=\"col-6 mt-3\">\r\n            {{#each curBidderInfo}}\r\n                <p><strong>Thông tin người đấu hiện tại: {{email}}</strong></p>\r\n            {{/each}}\r\n            </div>\r\n          </div>\r\n            {{#if ../auth}}\r\n                <p class=\"mt-3 has-text-danger font-weight-bold\">Giá đấu hiện tại: {{format_number proCurBidPrice}} VNĐ</p>\r\n            {{/if}}\r\n          <p class=\"mt-3 has-text-danger font-weight-bold\">Giá mua ngay: {{format_number proBuyNowPrice}} VNĐ</p>\r\n          <div class=\"row mt-3\">\r\n              {{#if ../auth}}\r\n                  <div class=\"col-12\">\r\n                      <a data-id=\"{{_id}}\" class=\"addItemFavorite text-decoration-none\" href=\"#\"><button type=\"button\" class=\"btn is-info btn-lg btn-block button is-rounded\">Thêm vào yêu thích</button></a>\r\n                      {{#if ../isOutOfDate}}\r\n                            <button type=\"button\" class=\"btn is-warning btn-lg btn-block button is-rounded\" disabled>Đấu giá đã hết hạn</button>\r\n                            <button id=\"buynowBtn\" type=\"button\" class=\"btn is-danger btn-lg btn-block button is-rounded\" disabled>Mua ngay đã hết hạn</button>\r\n                      {{else}}\r\n                          <a href=\"/bid/checkout?id={{_id}}\" <button type=\"button\" class=\"btn is-warning btn-lg btn-block button is-rounded\">Đấu giá</button></a>\r\n                          <a data-id=\"{{_id}}\" class=\"buyNow text-decoration-none\" href=\"#\"><button id=\"buynowBtn\" type=\"button\" class=\"btn is-danger btn-lg btn-block button is-rounded\">Mua ngay</button></a>\r\n                      {{/if}}\r\n                 </div>\r\n\r\n              {{/if}}\r\n          </div>\r\n        </div>\r\n    </div>\r\n    {{!\r\n    <div class=\"row justify-content-center\">\r\n        {{#each ../listSimilarity}}\r\n            <div class = \"col-2\">\r\n                <a style=\"text-decoration:none\" href=\"/product/{{_id}}\">\r\n                    <div class=\"card\">\r\n                        <div class=\"card-image\">\r\n                            <figure class=\"image is-4by3\">\r\n                                <img src=\"https://bulma.io/images/placeholders/1280x960.png\" alt=\"Placeholder image\">\r\n                            </figure>\r\n                        </div>\r\n                        <div class=\"card-content\">\r\n                            <div class=\"media\">\r\n                                <div class=\"media-content\">\r\n                                    <p class=\"title is-5\">{{proName}}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        {{/each}}\r\n    </div>\r\n    -}}\r\n    <div class=\"container-fluid\">\r\n        <div class=\"row mt-3 d-flex justify-content-center\">\r\n            {{#each ../listSimilarity}}\r\n                <a class=\"col-lg-2 p-3\" style=\"text-decoration:none\" href=\"/product/{{_id}}\">\r\n                    <div class=\"card h-100\">\r\n                        <img src=\"\">\r\n                        <div class=\"card-body\">\r\n                            <p class=\"h4 font-weight-bold\">{{proName}}</p>\r\n                        </div>\r\n                        <div class=\"has-background-grey-lighter\">\r\n                            <div class=\"card-footer justify-content-between\">\r\n                                <img src=\"\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </a>\r\n            {{/each}}\r\n        </div>\r\n    </div>\r\n    --}}\r\n    <div class=\"section\">\r\n        <!-- container -->\r\n        <div class=\"container\">\r\n            <!-- row -->\r\n            <div class=\"row\">\r\n                <!-- Product main img -->\r\n                <div class=\"col-md-5 col-md-push-1\">\r\n                    <div id=\"product-main-img\">\r\n                        <div class=\"product-preview\">\r\n                            <img src=\"/public/{{_id}}/{{../mainThumb}}\" alt=\"\">\r\n                        </div>\r\n                        {{#each ../files}}\r\n                            <div class=\"product-preview\">\r\n                                <img src=\"/public/{{../_id}}/{{this}}\" alt=\"\">\r\n                            </div>\r\n                        {{/each}}\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Product thumb imgs -->\r\n                <div class=\"col-md-2  col-md-pull-5\">\r\n                    <div id=\"product-imgs\">\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Product details -->\r\n                <div class=\"col-md-5\">\r\n                    <div class=\"product-details\">\r\n                        <h2 class=\"product-name\">{{proName}}</h2>\r\n                        <div>\r\n                            <h3 class=\"product-price\">{{format_number proCurBidPrice}} VNĐ</h3>\r\n                            {{#if ../isOutOfDate}}\r\n                                <span class=\"product-available\">Hết hạn</span>\r\n                            {{/if}}\r\n                        </div>\r\n                        {{#each sellerInfo}}\r\n                            <p>Người bán: {{email}}</p>\r\n                        {{/each}}\r\n                        {{#each curBidderInfo}}\r\n                            <p>Người giữ hiện tại: {{email}}</p>\r\n                        {{/each}}\r\n\r\n                        {{#if ../auth}}\r\n                            {{#if ../isOutOfDate}}\r\n                                    <div class=\"add-to-cart\">\r\n                                        <button class=\"add-to-cart-btn\"><i class=\"fa fa-shopping-cart\" disabled></i>Đấu giá không khả dụng</button>\r\n                                    </div>\r\n                            {{else}}\r\n                                <form action=\"/bid/checkout\" method=\"get\">\r\n                                    <div class=\"add-to-cart\">\r\n                                        <input type=\"text\" name=\"id\" value=\"{{_id}}\" hidden>\r\n        <!--                                <div class=\"qty-label\">-->\r\n        <!--                                    <div class=\"input-number\">-->\r\n        <!--                                            -->\r\n        <!--                                    </div>-->\r\n        <!--                                </div>-->\r\n                                        <button type=\"submit\" class=\"add-to-cart-btn\"><i class=\"fa fa-shopping-cart\"></i>Đấu giá</button></a>\r\n                                    </div>\r\n                                </form>\r\n                            {{/if}}\r\n                        {{/if}}\r\n                        <div>\r\n                            <h3 class=\"product-price\">Mua ngay: {{format_number proBuyNowPrice}} VNĐ</h3>\r\n                        </div>\r\n                        {{#if ../auth}}\r\n                            {{#if ../isOutOfDate}}\r\n                                    <div class=\"add-to-cart\">\r\n                                        <button class=\"add-to-cart-btn\"><i class=\"fa fa-shopping-cart\"></i>Mua ngay không khả dụng</button>\r\n                                    </div>\r\n                            {{else}}\r\n                                <div class=\"add-to-cart\">\r\n                                    <button data-id=\"{{_id}}\" class=\"add-to-cart-btn buyNow\"><i class=\"fa fa-shopping-cart\"></i>Mua ngay</button>\r\n                                </div>\r\n                            {{/if}}\r\n                        {{/if}}\r\n                        <ul class=\"product-btns\">\r\n                            {{#if ../auth}}\r\n\r\n                                <li><a href=\"\"><i class=\"fa fa-heart-o\"></i>Thêm vào yêu thích</a></li>\r\n                            {{/if}}\r\n                        </ul>\r\n                        <ul class=\"product-links\">\r\n                            <li>Danh mục:</li>\r\n                            <li><a href=\"/product?category={{catParent}}\">{{catParent}}</a></li>\r\n                            <li><a href=\"/product?category={{catChild}}\">{{catChild}}</a></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Product tab -->\r\n                <div class=\"col-md-12\">\r\n                    <div id=\"product-tab\">\r\n                        <!-- product tab nav -->\r\n                        <ul class=\"tab-nav\">\r\n                            <li class=\"active\"><a data-toggle=\"tab\" href=\"#tab1\">Mô tả</a></li>\r\n\r\n                            <li><a data-toggle=\"tab\" href=\"#tab2\">Lịch sử</a></li>\r\n\r\n                        </ul>\r\n                        <!-- product tab content -->\r\n                        <div class=\"tab-content\">\r\n                            <!-- tab1  -->\r\n                            <div id=\"tab1\" class=\"tab-pane fade in active\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-md-12\">\r\n                                        <p>{{{proDescription}}}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <!-- tab2  -->\r\n\r\n                            <div id=\"tab2\" class=\"tab-pane fade in\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-md-12\">\r\n                                        {{#if ../historyList}}\r\n                                            <table class=\"table table-striped mt-lg-5 border\">\r\n                                                <thead class=\"thead-dark\">\r\n                                                <tr>\r\n                                                    <th scope=\"col\">Thời điểm</th>\r\n                                                    <th scope=\"col\">Người mua</th>\r\n                                                    <th scope=\"col\">Giá</th>\r\n                                                </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                {{#each ../historyList}}\r\n                                                    <tr>\r\n                                                        <td>{{dateBid}}</td>\r\n                                                        <td>{{bidderInfo}}</td>\r\n                                                        <td>{{format_number curProPrice}} VNĐ</td>\r\n                                                    </tr>\r\n                                                {{/each}}\r\n\r\n                                            </table>\r\n                                        {{/if}}                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"section\">\r\n        <!-- container -->\r\n        <div class=\"container\">\r\n            <!-- row -->\r\n            <div class=\"row\">\r\n                <!-- section title -->\r\n                <div class=\"col-md-12\">\r\n                    <div class=\"section-title\">\r\n                        <h3 class=\"title\">Sản phẩm liên quan</h3>\r\n                    </div>\r\n                </div>\r\n                <!-- Products tab & slick -->\r\n                <div class=\"col-md-12\">\r\n                    <div class=\"row\">\r\n                        <div class=\"products-tabs\">\r\n                            <!-- tab -->\r\n                            <div id=\"tab3\" class=\"tab-pane fade in active\">\r\n                                <div class=\"products-slick\" data-nav=\"#slick-nav-3\">\r\n                                    <!-- product -->\r\n                                    {{#each ../listSimilarity}}\r\n                                        <div class=\"product\">\r\n                                            <div class=\"product-img\">\r\n                                                <img src=\"/public/{{_id}}/{{mainThumb}}\" alt=\"\">\r\n                                                <div class=\"product-label\">\r\n                                                {{#if check}}\r\n                                                    <span class=\"new\">Mới</span>\r\n                                                {{/if}}\r\n                                                {{#if check1}}\r\n                                                    <span class=\"sale\">Hết hạn</span>\r\n                                                {{/if}}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"product-body\">\r\n                                                <p class=\"product-category\">{{catChild}}</p>\r\n                                                <h3 class=\"product-name\"><a href=\"/product/{{_id}}\">{{proName}}</a></h3>\r\n                                                <h4 class=\"product-price\">{{format_number proCurBidPrice}}</h4>\r\n                                                <div class=\"product-details\">\r\n                                                    {{#each curBidderInfo}}\r\n                                                        <p> Người đặt hiện tại: {{email}} </p>\r\n                                                    {{/each}}\r\n                                                    <p> Ngày đăng sản phẩm: {{proStartDate}}</p>\r\n                                                    {{#if check1}}\r\n                                                    {{else}}\r\n                                                        <p> Thời gian còn lại: {{format_number time}} giờ</p>\r\n                                                    {{/if}}\r\n                                                    <p> Số lượt ra giá: {{proBidQuantity}}</p>\r\n                                                </div>\r\n                                                <div class=\"product-btns\">\r\n                                                    {{#if ../../this.auth}}\r\n                                                        <button class=\"add-to-wishlist\"><i class=\"fa fa-heart-o\"></i><span class=\"tooltipp\">Yêu thích</span></button>\r\n                                                    {{/if}}\r\n                                                    <button class=\"quick-view\" onclick=\"location.href='/product/{{_id}}';\"><i class=\"fa fa-eye\"></i><span class=\"tooltipp\">Xem chi tiết</span></button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    {{/each}}\r\n                                </div>\r\n                                <div id=\"slick-nav-3\" class=\"products-slick-nav\"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n{{/each}}\r\n\r\n\r\n\r\n<div class=\"modal fade has-background-grey-lighter\" id=\"exampleModalCenter\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Thông báo</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                Giá đấu giá đã vượt qua giá giới hạn để mua ngay. Bạn không thể \"mua ngay\".\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary btn-danger\" data-dismiss=\"modal\">Đóng</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal fade has-background-grey-lighter\" id=\"confirmModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Xác nhận</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                Xác nhận bạn muốn mua ngay.\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Đóng</button>\r\n                <button id=\"confirm\" type=\"button\" class=\"btn btn-primary\">Xác nhận</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/detail.hbs b/views/detail.hbs
--- a/views/detail.hbs	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/views/detail.hbs	(date 1642006972088)
@@ -217,10 +217,10 @@
                             {{/if}}
                         </div>
                         {{#each sellerInfo}}
-                            <p>Người bán: {{email}}</p>
+                            <p>Người bán: <a style="cursor: pointer; font-size: 20px" href="/user/comment-from-bidder/{{_id}}" class="product-price">{{email}}</a></p>
                         {{/each}}
                         {{#each curBidderInfo}}
-                            <p>Người giữ hiện tại: {{email}}</p>
+                            <p>Người giữ hiện tại: <a style="cursor: pointer; font-size: 20px" class="product-price">{{email}}</a></p>
                         {{/each}}
 
                         {{#if ../auth}}
Index: views/viewAccountBidder/comment-from-seller.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{{#section 'js'}}\r\n    <script>\r\n        $('#homePageNavbar').hide();\r\n\r\n    </script>\r\n{{/section}}\r\n<div class=\"container-fluid min-vh-100\">\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-3 has-background-grey-lighter\">\r\n            <ul class=\"nav flex-column\">\r\n                <div class=\"h4 text-center ml-auto mr-auto p-4\">Hồ sơ</div>\r\n                <li class=\"nav-item\">\r\n                    <div class=\"h6 text-center\">Điểm đánh giá: {{this.total}}</div>\r\n                </li>\r\n                <li class=\"nav-item\">\r\n                    <div class=\"h6 text-center\">Đánh giá tích cực: {{this.likeRate}}%</div>\r\n                </li>\r\n                <li class=\"nav-item\">\r\n                    <div class=\"h6 text-center\">Đánh giá tiêu cực: {{this.dislikeRate}}%</div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"col-sm-9\">\r\n            {{#each this.product}}\r\n                {{#each details}}\r\n                <div class=\"card mb-2 ml-auto mr-auto\" style=\"width: 70vw;\">\r\n                    <div class=\"row no-gutters\">\r\n                        <div class=\"col-md-2\">\r\n                            <img src=\"/public/{{_id}}/{{mainThumb}}\" class=\"card-img\" alt=\"...\">\r\n                        </div>\r\n                        <div class=\"col-md-9\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title\"><strong>{{proName}}</strong></h5>\r\n                {{/each}}\r\n\r\n                                <p class=\"card-text\">Nội dung: {{sellerComment}}</p>\r\n<!--                                <div class=\"d-flex\">-->\r\n<!--                                    <p class=\"card-text\"><small class=\"text-muted\">sellerRate</small></p>-->\r\n<!--&lt;!&ndash;                                    <div class=\"flex-fill\"><a href=\"#\"><button class=\"btn btn-primary float-right\" aria-hidden=\"true\">Nhận xét</button></a></div>&ndash;&gt;-->\r\n<!--                                </div>-->\r\n                            </div>\r\n                        </div>\r\n                        {{#if sellerRate}}\r\n                            <div class=\"col-md-1\">\r\n                                <i class=\"fa fa-thumbs-o-up fa-4x mt-lg-3\" aria-hidden=\"true\"></i>\r\n                            </div>\r\n                        {{else}}\r\n                            <div class=\"col-md-1\">\r\n                                <i class=\"fa fa-thumbs-o-down fa-4x mt-lg-3\" aria-hidden=\"true\"></i>\r\n                            </div>\r\n                        {{/if}}\r\n\r\n                    </div>\r\n                </div>\r\n                {{else}}\r\n                <p class=\"h4 text-center mt-5\">Chưa có đánh giá nào từ người bán</p>\r\n            {{/each}}\r\n        </div>\r\n\r\n    </div>\r\n</div>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/viewAccountBidder/comment-from-seller.hbs b/views/viewAccountBidder/comment-from-seller.hbs
--- a/views/viewAccountBidder/comment-from-seller.hbs	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/views/viewAccountBidder/comment-from-seller.hbs	(date 1642005725955)
@@ -3,58 +3,76 @@
         $('#homePageNavbar').hide();
 
     </script>
+
+    <style>
+        .card-img{
+            max-height: 100%;
+            max-width: 100%;
+        }
+    </style>
 {{/section}}
 <div class="container-fluid min-vh-100">
     <div class="row">
-        <div class="col-sm-3 has-background-grey-lighter">
+        <div class="col-sm-3 has-background-grey-lighter" style="background: #1b1e21; height: 100vh; padding: 5px" >
             <ul class="nav flex-column">
-                <div class="h4 text-center ml-auto mr-auto p-4">Hồ sơ</div>
+                <div class="h3 text-center ml-auto mr-auto p-4" style="color: #FFFFFF">Hồ sơ</div>
+                <hr class="navbar-divider">
+
                 <li class="nav-item">
-                    <div class="h6 text-center">Điểm đánh giá: {{this.total}}</div>
+                    <div class="h4 p-5"  style="background: #FFFFFF; padding: 10px">Điểm đánh giá: {{this.total}}</div>
                 </li>
                 <li class="nav-item">
-                    <div class="h6 text-center">Đánh giá tích cực: {{this.likeRate}}%</div>
+                    <div class="h4 p-5"  style="background: #FFFFFF; padding: 10px">Đánh giá tích cực: {{this.likeRate}}%</div>
                 </li>
                 <li class="nav-item">
-                    <div class="h6 text-center">Đánh giá tiêu cực: {{this.dislikeRate}}%</div>
+                    <div class="h4 p-5"  style="background: #FFFFFF; padding: 10px">Đánh giá tiêu cực: {{this.dislikeRate}}%</div>
                 </li>
             </ul>
         </div>
         <div class="col-sm-9">
-            {{#each this.product}}
-                {{#each details}}
-                <div class="card mb-2 ml-auto mr-auto" style="width: 70vw;">
-                    <div class="row no-gutters">
-                        <div class="col-md-2">
-                            <img src="/public/{{_id}}/{{mainThumb}}" class="card-img" alt="...">
-                        </div>
-                        <div class="col-md-9">
-                            <div class="card-body">
-                                <h5 class="card-title"><strong>{{proName}}</strong></h5>
-                {{/each}}
-
-                                <p class="card-text">Nội dung: {{sellerComment}}</p>
-<!--                                <div class="d-flex">-->
-<!--                                    <p class="card-text"><small class="text-muted">sellerRate</small></p>-->
-<!--&lt;!&ndash;                                    <div class="flex-fill"><a href="#"><button class="btn btn-primary float-right" aria-hidden="true">Nhận xét</button></a></div>&ndash;&gt;-->
-<!--                                </div>-->
-                            </div>
-                        </div>
-                        {{#if sellerRate}}
-                            <div class="col-md-1">
-                                <i class="fa fa-thumbs-o-up fa-4x mt-lg-3" aria-hidden="true"></i>
-                            </div>
-                        {{else}}
-                            <div class="col-md-1">
-                                <i class="fa fa-thumbs-o-down fa-4x mt-lg-3" aria-hidden="true"></i>
-                            </div>
-                        {{/if}}
-
-                    </div>
-                </div>
+            <p class="container-fluid">
+
+                {{#each this.product}}
+                    {{#each details}}
+                        <div class="d-flex justify-content-center">
+                            <div class="product mb-2 ml-auto mr-auto border" style="width: 70vw">
+                                <div class="row no-gutters">
+                                    <div class="col-md-4">
+                                        <img src="/public/{{_id}}/main-thumb.jpg" class="card-img" alt="...">
+                                    </div>
+                                    <div class="col-md-7">
+                                        <div class="card-body h-50">
+                                            <div class="d-flex">
+                                                <span class="h5 product-name"><strong>{{proName}}</strong></span>
+                                                <span class="flex-fill">
+                                            </span>
+                                            </div>
+                                            <p class="card-text">Nội dung: {{../sellerComment}}</p>
+                                        </div>
+                                        <div class="card-footer h-50">
+                                            <a class="d-flex flex-row-reverse p-3 h-100 w-100" href="/product/{{_id}}"><button class="d-flex flex-column align-self-end btn btn-primary is-rounded" aria-hidden="true">Xem sản phẩm</button> </a>
+                                        </div>
+                                    </div>
+
+                                    {{#if ../sellerRate}}
+                                        <div class="col-md-1">
+                                            <i class="fa fa-thumbs-o-up fa-4x mt-lg-3" aria-hidden="true"></i>
+                                        </div>
+                                    {{else}}
+                                        <div class="col-md-1">
+                                            <i class="fa fa-thumbs-o-down fa-4x mt-lg-3" aria-hidden="true"></i>
+                                        </div>
+                                    {{/if}}
+                                </div>
+                            </div>
+                        </div>
+                    {{/each}}
                 {{else}}
-                <p class="h4 text-center mt-5">Chưa có đánh giá nào từ người bán</p>
-            {{/each}}
+                    <hr class="navbar-divider">
+                    <div class="h4 text-center mt-5 mb-5">Hiện tại bạn chưa có sản phẩm yêu thích nào</div>
+                {{/each}}
+            </div>
+            </p>
         </div>
 
     </div>
Index: views/layouts/seller.layout.insert.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Home</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\" integrity=\"sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <style>\r\n        .card-footer{\r\n            background-color: #fff;\r\n            border-radius: 50px !important;\r\n            margin: 5px;\r\n        }\r\n        .dropdown-item:hover{\r\n            cursor: pointer;\r\n        }\r\n        ul{\r\n            list-style-type: none;\r\n        }\r\n        body{\r\n            color: #4a4a4a;\r\n            font-size: 1em;\r\n            font-weight: 400;\r\n            line-height: 1.5;\r\n        }\r\n        aside a{\r\n            color: #4a4a4a;\r\n            font-size: 1em;\r\n            font-weight: 400;\r\n            line-height: 1.5;\r\n            display: block;\r\n            padding: 10px;\r\n\r\n        }\r\n\r\n        nav a{\r\n            color: #4a4a4a;\r\n            font-size: 1em;\r\n            font-weight: 400;\r\n            line-height: 1.5;\r\n        }\r\n    </style>\r\n\r\n    {{{_sections.css}}}\r\n</head>\r\n<body>\r\n<nav class=\"navbar navbar-expand-md \" style=\"background-color: #b5b5b5;\">\r\n    <div class=\"navbar-brand\">\r\n        <a class=\"navbar-brand\" href=\"#\">\r\n            <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\">\r\n        </a>\r\n    </div>\r\n\r\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n\r\n    <div class=\"collapse navbar-collapse row\" id=\"navbarSupportedContent\">\r\n        <div class=\"col-6\">\r\n            <ul class=\"navbar-nav ml-5\">\r\n                <a href=\"/seller/channel\" class=\"navbar-item text-decoration-none\">\r\n                    Kênh người bán\r\n                </a>\r\n\r\n                {{#if XemSanPham.isActive}}\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\" >\r\n                        Xem sản phẩm\r\n                    </a>\r\n                    {{#if XemChiTiet.isActive}}\r\n                        <span class=\"navbar-item\"> > </span>\r\n                        <p href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\">\r\n                            Xem Chi Tiết\r\n                        </p>\r\n                    {{/if}}\r\n                {{else if ThemSanPham.isActive}}\r\n\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product/insert\" class=\"navbar-item text-decoration-none\">\r\n                        Thêm Sản phẩm\r\n                    </a>\r\n                {{/if}}\r\n            </ul>\r\n        </div>\r\n        <div class=\"col-6\">\r\n            <ul class=\"navbar-nav  \">\r\n                <li class=\"nav-item dropdown w-100 row justify-content-end \">\r\n                    <a class=\"nav-link dropdown-toggle active ml-auto\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                        <i class=\"fa fa-user-circle fa-3x\" aria-hidden=\"true\"></i>\r\n                        <b class=\"ml-3 h3\">\r\n                            {{user.name}}\r\n                        </b>\r\n                    </a>\r\n                    <div class=\"dropdown-menu dropdown-menu-right \" aria-labelledby=\"navbarDropdown\">\r\n                        <a class=\"dropdown-item text-decoration-none\" href=\"/user/update-profile\">\r\n                            <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Thông tin cá nhân\r\n                        </a>\r\n                        <a class=\"dropdown-item text-decoration-none\" >\r\n                            <i class=\"fa fa-cube fa-2x mr-1\" aria-hidden=\"true\"></i>\r\n                            Kênh Người bán\r\n                        </a>\r\n                        <hr class=\"dropdown-divider\">\r\n                        <a class=\"dropdown-item text-decoration-none\"  href=\"javascript: $('#formLogout').submit();\">\r\n                            <i class=\"fa fa-sign-out fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Đăng xuất\r\n                        </a>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n    </div>\r\n</nav>\r\n\r\n<section>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-3 pt-6 min-vh-100\" style=\"background-color: #b5b5b5\">\r\n            <aside class=\"menu  p-3\"  >\r\n                <ul class=\"menu-list h4 mb-5 pl-2 mt-5\">\r\n                    <a class=\"text-decoration-none menu-label {{#if ThongTinChung.isActive}}is-active{{/if}}\" href=\"/seller/channel\">\r\n                        <i class=\"fa fa-tachometer fa-2x \" aria-hidden=\"true\"></i>\r\n                        Thông Tin Chung\r\n                    </a>\r\n                </ul>\r\n\r\n                <ul class=\"menu-list h4 mb-5 pl-2 \">\r\n                    <li >\r\n                        <a class=\"text-decoration-none menu-label \" href=\"/seller/channel/product\">\r\n                            <i class=\"fa fa-cube fa-2x\" aria-hidden=\"true\"></i>\r\n                            Quản lý Sản Phẩm\r\n                        </a>\r\n                        <ul class=\"mt-3\" style=\"border-left: 1px solid #FFFFFF\">\r\n                            <li><a class=\"text-decoration-none {{#if XemSanPham.isActive}}is-active{{/if}}\" href=\"/seller/channel/product\">Xem Sản phẩm</a></li>\r\n                            <li class=\"mt-2\"><a class=\"text-decoration-none w-100\" style=\"background-color: #485fc7; color: #FFFFFF\" href=\"/seller/channel/product/insert\">Thêm Sản Phẩm</a></li>\r\n                        </ul>\r\n                    </li>\r\n                </ul>\r\n\r\n                <ul class=\"menu-list h4 mb-5 pl-2\">\r\n                    <a class=\"menu-label {{#if DanhGia.isActive}}is-active{{/if}}\" href=\"/seller/evaluate/{{sellerID}}\">\r\n                        <i class=\"fa fa-users fa-2x \" aria-hidden=\"true\"></i>\r\n                        Đánh giá của người mua\r\n                    </a>\r\n                </ul>\r\n\r\n            </aside>\r\n        </div>\r\n\r\n        <div class=\"col-sm-9\">\r\n            {{{body}}}\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<script src=\"https://code.jquery.com/jquery-3.6.0.min.js\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js\" integrity=\"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js\" integrity=\"sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2\" crossorigin=\"anonymous\"></script>\r\n{{{_sections.js}}}\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/layouts/seller.layout.insert.hbs b/views/layouts/seller.layout.insert.hbs
--- a/views/layouts/seller.layout.insert.hbs	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/views/layouts/seller.layout.insert.hbs	(date 1642001696688)
@@ -92,10 +92,22 @@
                         </b>
                     </a>
                     <div class="dropdown-menu dropdown-menu-right " aria-labelledby="navbarDropdown">
-                        <a class="dropdown-item text-decoration-none" href="/user/update-profile">
+                        <a class="dropdown-item text-decoration-none" href="/user/update-profile" >
                             <i class="fa fa-user fa-2x mr-2" aria-hidden="true"></i>
                             Thông tin cá nhân
                         </a>
+                        <a class="dropdown-item text-decoration-none" href="/user/favorite">
+                            <i class="fa fa-heart-o fa-2x mr-2" aria-hidden="true"></i>
+                            Danh sách yêu thích
+                        </a>
+                        <a class="dropdown-item text-decoration-none" href="/user/auction-history">
+                            <i class="fa fa-history fa-2x mr-2" aria-hidden="true"></i>
+                            Lịch sử đấu giá
+                        </a>
+                        <a class="dropdown-item text-decoration-none" href="/user/comment-from-seller/{{user._id}}">
+                            <i class="fa fa-comment fa-2x mr-2" aria-hidden="true"></i>
+                            Đánh giá từ người bán
+                        </a>
                         <a class="dropdown-item text-decoration-none" >
                             <i class="fa fa-cube fa-2x mr-1" aria-hidden="true"></i>
                             Kênh Người bán
Index: views/layouts/main.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Online Auction</title>\r\n    {{!--\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\" integrity=\"sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css\">\r\n    --}}\r\n<!--    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css\">-->\r\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/public/main/css/bootstrap.min.css\"/>\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/public/main/css/slick.css\"/>\r\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/public/main/css/slick-theme.css\"/>\r\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/public/main/css/nouislider.min.css\"/>\r\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/public/main/css/style.css\"/>\r\n    <style>\r\n        .dropdownBtn:hover{\r\n            background-color: #D10024;\r\n        }\r\n\r\n        .favBtn:hover{\r\n            background-color: #D10024;\r\n        }\r\n\r\n        .dropdownMenu > a{\r\n            display: block;\r\n            font-size: 18px;\r\n        }\r\n\r\n        .dropdownMenu{\r\n            padding: 5px;\r\n            width: 250px !important;\r\n        }\r\n    </style>\r\n    {{{_sections.css}}}\r\n</head>\r\n{{!--\r\n<body>\r\n<nav class=\"navbar has-background-grey-light\" role=\"navigation\" aria-label=\"main navigation\">\r\n    <div class=\"navbar-brand\">\r\n        <a class=\"navbar-item\" href=\"/\">\r\n            <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\">\r\n        </a>\r\n        <a role=\"button\" class=\"navbar-burger\" onclick=\"document.querySelector('.navbar-menu').classList.toggle('is-active');\" aria-label=\"menu\" aria-expanded=\"false\">\r\n            <span aria-hidden=\"true\"></span>\r\n            <span aria-hidden=\"true\"></span>\r\n            <span aria-hidden=\"true\"></span>\r\n        </a>\r\n    </div>\r\n    <div class=\"navbar-menu\">\r\n        <div class=\"navbar-start\">\r\n            <a style=\"text-decoration:none\" class=\"navbar-item\" href=\"/\">\r\n                <strong>Trang chủ</strong>\r\n            </a>\r\n            <a style=\"text-decoration:none\" class=\"navbar-item\" href=\"/product\">\r\n                <strong>Sản phẩm </strong>\r\n            </a>\r\n        </div>\r\n        <form class=\"navbar-item\" action=\"/search\" method=\"get\">\r\n            <div class=\"control has-icons-left\">\r\n                <input class=\"input\" type=\"text\" placeholder=\"Nhập từ khóa tìm kiếm\" name=\"keyword\">\r\n                <span class=\"icon is-left is-small\">\r\n                    <i class=\"fa fa-search\"></i>\r\n                </span>\r\n            </div>\r\n            <div class=\"select\">\r\n                <select name=\"with\">\r\n                    <option value=\"name\">Theo tên</option>\r\n                    <option value=\"category\">Theo danh mục</option>\r\n                </select>\r\n            </div>\r\n            <div>&nbsp;&nbsp;&nbsp;&nbsp;</div>\r\n            <button class=\"button is-success\" type=\"submit\">\r\n                <span>Tìm kiếm</span>\r\n                <span class=\"icon is-small\">\r\n                    <i class=\"fa fa-search\"></i>\r\n                </span>\r\n            </button>\r\n        </form>\r\n        <div class=\"navbar-end\">\r\n            <div class=\"navbar-item\">\r\n                {{#if auth}}\r\n                    <div class=\"navbar-item has-dropdown is-hoverable\">\r\n                        <div href=\"#\" class=\"navbar-link\">\r\n                            <i class=\"fa fa-user-circle fa-3x\" aria-hidden=\"true\"></i>\r\n                            <p class=\"ml-3\">{{user.name}}</p>\r\n                        </div>\r\n                        <div class=\"navbar-dropdown\">\r\n<!--                            <a class=\"navbar-item text-decoration-none\">-->\r\n<!--                                <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>-->\r\n<!--                                Thông tin cá nhân-->\r\n<!--                            </a>-->\r\n                            {{#if bidderRole}}\r\n                                <a class=\"navbar-item text-decoration-none\" href=\"../user/update-profile\">\r\n                                    <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                    Thông tin cá nhân\r\n                                </a>\r\n                                <a class=\"navbar-item text-decoration-none\" href=\"../user/favorite\">\r\n                                    <i class=\"fa fa-heart-o fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                    Danh sách yêu thích\r\n                                </a>\r\n                                <a class=\"navbar-item text-decoration-none\" href=\"../user/auction-history\">\r\n                                    <i class=\"fa fa-history fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                    Lịch sử đấu giá\r\n                                </a>\r\n                                <a class=\"navbar-item text-decoration-none\" href=\"../user/comment-from-seller\">\r\n                                    <i class=\"fa fa-comment fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                    Đánh giá từ người bán\r\n                                </a>\r\n                            {{else}}\r\n                                {{#if adminRole}}\r\n                                    <a class=\"navbar-item text-decoration-none\" href=\"/admin\">\r\n                                        <i class=\"fa fa-cube fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                        Kênh quản trị\r\n                                    </a>\r\n                                {{else}}\r\n                                    <a class=\"navbar-item text-decoration-none\" href=\"../user/update-profile\">\r\n                                        <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                        Thông tin cá nhân\r\n                                    </a>\r\n                                    <a class=\"navbar-item text-decoration-none\" href=\"/seller/channel\">\r\n                                        <i class=\"fa fa-cube fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                        Kênh người bán\r\n                                    </a>\r\n                                {{/if}}\r\n                            {{/if}}\r\n                            <hr class=\"navbar-divider\">\r\n                            <form id=\"formLogout\" action=\"/account/logout\" method=\"post\"></form>\r\n                            <a class=\"navbar-item text-decoration-none\" href=\"javascript: $('#formLogout').submit();\">\r\n                                <i class=\"fa fa-sign-out fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                Đăng xuất\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                {{else}}\r\n                    <div class=\"buttons\">\r\n                        <a style=\"text-decoration:none\" class=\"button is-primary\" href=\"/login\">\r\n                            <strong>Đăng nhập</strong>\r\n                        </a>\r\n                        <a style=\"text-decoration:none\" class=\"button is-light\" href=\"/signup\">\r\n                            Đăng ký\r\n                        </a>\r\n                    </div>\r\n                {{/if}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</nav>\r\n<div class=\"row\">\r\n    <nav class=\"navbar\" id=\"homePageNavbar\" role=\"navigation\" aria-label=\"dropdown navigation\">\r\n        {{#each this.categories}}\r\n            <div class=\"navbar-item has-dropdown is-hoverable\">\r\n                <a class=\"navbar-link\" href=\"/product?category={{catParent}}\">\r\n                    <strong>{{catParent}}</strong>\r\n                </a>\r\n                <div class=\"navbar-dropdown\">\r\n                    {{#each catChild}}\r\n                        <a class=\"navbar-item\" href=\"/product?category={{name}}\">\r\n                            {{name}}\r\n                        </a>\r\n                    {{/each}}\r\n                </div>\r\n            </div>\r\n        {{/each}}\r\n    </nav>\r\n</div>\r\n{{{body}}}\r\n<footer class=\"footer has-background-grey-light\" id=\"footer\">\r\n    <div class=\"row\">\r\n        <div class=\"col-4\">\r\n            <div class=\"content\">\r\n                <p class=\"has-text-centered\">\r\n                    <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\">\r\n                </p>\r\n                <p>\r\n                    <span class=\"icon is-small\">\r\n                        <i class=\"fa fa-map-marker\"></i>\r\n                    </span>\r\n                    <span>Địa chỉ: University of Science</span>\r\n                </p>\r\n                <p>\r\n                    <span class=\"icon is-small\">\r\n                        <i class=\"fa fa-phone\"></i>\r\n                    </span>\r\n                    <span>Số điện thoại: +84123-456-789</span>\r\n                </p>\r\n                <p>\r\n                    <span class=\"icon is-small\">\r\n                        <i class=\"fa fa-envelope\"></i>\r\n                    </span>\r\n                    <span>Email: admin@gmail.com</span>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n            <div class=\"content has-text-centered\">\r\n                <p class=\"h2\">\r\n                    <strong>VỀ CHÚNG TÔI</strong>\r\n                </p>\r\n                <p>\r\n                    SLOGAN OF PRODUCT\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n            <div class=\"content has-text-centered\">\r\n                <p class=\"h2\">\r\n                    <strong>SOCIAL MEDIA</strong>\r\n                </p>\r\n                <button class=\"button\">\r\n                    <a style=\"text-decoration:none\" href=\"https://facebook.com\" target=\"_top\">\r\n                        <span class=\"icon is-small\">\r\n                            <i class=\"fa fa-facebook\"></i>\r\n                        </span>\r\n                    </a>\r\n                </button>\r\n                <button class=\"button\">\r\n                    <a style=\"text-decoration:none\" href=\"https://instagram.com\" target=\"_top\">\r\n                        <span class=\"icon is-small\">\r\n                            <i class=\"fa fa-instagram\"></i>\r\n                        </span>\r\n                    </a>\r\n                </button>\r\n                <button class=\"button\">\r\n                    <a style=\"text-decoration:none\" href=\"https://twitter.com\" target=\"_top\">\r\n                        <span class=\"icon is-small\">\r\n                            <i class=\"fa fa-twitter\"></i>\r\n                        </span>\r\n                    </a>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</footer>\r\n--}}\r\n<body>\r\n    <header>\r\n        <div id=\"header\">\r\n            <div class=\"container\">\r\n                <div class=\"row\">\r\n                    <!-- LOGO -->\r\n                    <div class=\"col-md-3\">\r\n                        <div class=\"header-logo\">\r\n                            <a href=\"/\" class=\"logo\">\r\n                                <img src=\"\">\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                    <!-- SEARCH BAR -->\r\n                    <div class=\"col-md-6\">\r\n                        <div class=\"header-search\">\r\n                            <form action=\"/search\" method=\"get\">\r\n                                <select class=\"input-select\" name=\"with\">\r\n                                    <option value=\"name\">Theo tên</option>\r\n                                    <option value=\"category\">Theo danh mục</option>\r\n                                </select>\r\n                                <input class=\"input\" placeholder=\"Tìm kiếm sản phẩm\" name=\"keyword\">\r\n                                <button class=\"search-btn\" type=\"submit\">Tìm kiếm</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- ACCOUNT -->\r\n                    <div class=\"col-md-3 clearfix \">\r\n                        <div class=\"header-ctn\">\r\n                            <!-- Right menu -->\r\n                            {{#if auth}}\r\n\r\n                                <div style=\"display: block!important;\">\r\n                                    <a href=\"/user/favorite\"  role=\"button\" class=\"favBtn\" style=\"text-align: left !important; padding: 5px; width: 100%\">\r\n                                        <i class=\"fa fa-heart-o fa-2x\" aria-hidden=\"true\" style=\"display: inline !important; font-size: 25px !important;\"></i>\r\n                                        <span class=\"h3\" style=\"margin-left: 5px; font-size: 20px\">Yêu thích</span>\r\n                                    </a>\r\n                                </div>\r\n\r\n\r\n                                <div >\r\n                                    <ul class=\"navbar-nav  \">\r\n                                        <li class=\"nav-item dropdown w-100 row justify-content-end dropdownBtn\" style=\"padding: 5px\">\r\n                                            <a class=\"nav-link dropdown-toggle ml-auto \"\r\n                                               href=\"#\"\r\n                                               id=\"navbarDropdown\"\r\n                                               role=\"button\"\r\n                                               data-toggle=\"dropdown\"\r\n                                               aria-expanded=\"false\"\r\n                                               style=\"color: #FFFFFF\">\r\n                                                <i class=\"fa fa-user-circle fa-2x\" aria-hidden=\"true\"></i>\r\n                                                <span  style=\"margin-left: 5px; margin-right: 10px\">\r\n                                                    <b class=\"h3\">\r\n                                                        {{user.name}}\r\n                                                    </b>\r\n                                                </span>\r\n                                                <i class=\"fa fa-caret-down fa-2x\"></i>\r\n                                            </a>\r\n\r\n                                            <div class=\"dropdown-menu dropdown-menu-right dropdownMenu \" aria-labelledby=\"navbarDropdown\" style=\"width: 200px\">\r\n                                                {{#if bidderRole}}\r\n                                                    <a class=\"dropdown-item text-decoration-none\" href=\"../user/update-profile\" >\r\n                                                        <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                        Thông tin cá nhân\r\n                                                    </a>\r\n                                                    <a class=\"dropdown-item text-decoration-none\" href=\"../user/favorite\">\r\n                                                        <i class=\"fa fa-heart-o fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                        Danh sách yêu thích\r\n                                                    </a>\r\n                                                    <a class=\"dropdown-item text-decoration-none\" href=\"../user/auction-history\">\r\n                                                        <i class=\"fa fa-history fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                        Lịch sử đấu giá\r\n                                                    </a>\r\n                                                    <a class=\"dropdown-item text-decoration-none\" href=\"../user/comment-from-seller\">\r\n                                                        <i class=\"fa fa-comment fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                        Đánh giá từ người bán\r\n                                                    </a>\r\n                                                {{else}}\r\n                                                    {{#if adminRole}}\r\n                                                        <a class=\"dropdown-item text-decoration-none\" href=\"/admin\">\r\n                                                            <i class=\"fa fa-cube fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                            Kênh quản trị\r\n                                                        </a>\r\n                                                    {{else}}\r\n                                                        <a class=\"dropdown-item text-decoration-none\" href=\"../user/update-profile\">\r\n                                                            <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                            Thông tin cá nhân\r\n                                                        </a>\r\n                                                        <a class=\"dropdown-item text-decoration-none\" href=\"/seller/channel\">\r\n                                                            <i class=\"fa fa-cube fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                            Kênh người bán\r\n                                                        </a>\r\n                                                    {{/if}}\r\n                                                {{/if}}\r\n                                                <hr class=\"dropdown-divider\">\r\n                                                <form id=\"formLogout\" action=\"/account/logout\" method=\"post\"></form>\r\n                                                <a class=\"dropdown-item text-decoration-none\"  href=\"javascript: $('#formLogout').submit();\">\r\n                                                    <i class=\"fa fa-sign-out fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                                                    Đăng xuất\r\n                                                </a>\r\n                                            </div>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n\r\n\r\n\r\n\r\n\r\n                            {{else}}\r\n                                <div>\r\n                                    <a href=\"/login\">\r\n                                        <i class=\"fa fa-sign-in\"></i>\r\n                                        <span>Đăng nhập</span>\r\n                                    </a>\r\n                                </div>\r\n                                <div>\r\n                                    <a href=\"/signup\">\r\n                                        <i class=\"fa fa-user-plus\"></i>\r\n                                        <span>Đăng ký</span>\r\n                                    </a>\r\n                                </div>\r\n                            {{/if}}\r\n                            <!-- Menu Toogle -->\r\n                            <div class=\"menu-toggle\">\r\n                                <a href=\"#\">\r\n                                    <i class=\"fa fa-bars\"></i>\r\n                                    <span>Menu</span>\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </header>\r\n    <!-- NAVIGATION -->\r\n    <nav id=\"navigation\">\r\n        <!-- container -->\r\n        <div class=\"container\">\r\n            <!-- responsive-nav -->\r\n            <div id=\"responsive-nav\">\r\n                <!-- NAV -->\r\n                <ul class=\"main-nav nav navbar-nav\">\r\n                    <li><a href=\"/\">Trang chủ</a></li>\r\n                    <li><a href=\"/product\">Sản phẩm</a></li>\r\n                    {{#each this.categories}}\r\n                        <li><a href=\"/product?category={{catParent}}\">{{catParent}}</a></li>\r\n                    {{/each}}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n    {{{body}}}\r\n    <footer id=\"footer\">\r\n        <!-- top footer -->\r\n        <div class=\"section\">\r\n            <!-- container -->\r\n            <div class=\"container\">\r\n                <!-- row -->\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-3 col-xs-6\">\r\n                        <div class=\"footer\">\r\n                            <h3 class=\"footer-title\">Về chúng tôi</h3>\r\n                            <p></p>\r\n                            <ul class=\"footer-links\">\r\n                                <li><a><i class=\"fa fa-map-marker\"></i>Đại học Khoa học tự nhiên</a></li>\r\n                                <li><a><i class=\"fa fa-phone\"></i>+841-234-5678</a></li>\r\n                                <li><a><i class=\"fa fa-envelope-o\"></i>fit@hcmus.edu.vn</a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-md-3 col-xs-6\"></div>\r\n                    <div class=\"clearfix visible-xs\"></div>\r\n                    <div class=\"col-md-3 col-xs-6\">\r\n                        <div class=\"footer\">\r\n                            <h3 class=\"footer-title\">Dịch vụ</h3>\r\n                            <ul class=\"footer-links\">\r\n                                <li><a href=\"/product\">Sản phẩm</a></li>\r\n                                <li><a href=\"#\">Tài khoản</a></li>\r\n                                <li><a href=\"#\">Danh sách yêu thích</a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- bottom footer -->\r\n        <div id=\"bottom-footer\" class=\"section\">\r\n            <div class=\"container\">\r\n                <!-- row -->\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-12 text-center\">\r\n                        <ul class=\"footer-payments\">\r\n                            <li><a><i class=\"fa fa-cc-visa\"></i></a></li>\r\n                            <li><a><i class=\"fa fa-cc-paypal\"></i></a></li>\r\n                            <li><a><i class=\"fa fa-cc-mastercard\"></i></a></li>\r\n                        </ul>\r\n                        <span class=\"copyright\">\r\n                            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </footer>\r\n</body>\r\n\r\n{{!--\r\n<script src=\"https://code.jquery.com/jquery-3.6.0.min.js\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js\" integrity=\"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js\" integrity=\"sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2\" crossorigin=\"anonymous\"></script>\r\n--}}\r\n<script src=\"/public/main/js/jquery.min.js\"></script>\r\n<script src=\"/public/main/js/bootstrap.min.js\"></script>\r\n<script src=\"/public/main/js/slick.min.js\"></script>\r\n<script src=\"/public/main/js/nouislider.min.js\"></script>\r\n<script src=\"/public/main/js/jquery.zoom.min.js\"></script>\r\n<script src=\"/public/main/js/main.js\"></script>\r\n{{{_sections.js}}}\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/layouts/main.hbs b/views/layouts/main.hbs
--- a/views/layouts/main.hbs	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/views/layouts/main.hbs	(date 1642001045841)
@@ -297,32 +297,60 @@
 
                                             <div class="dropdown-menu dropdown-menu-right dropdownMenu " aria-labelledby="navbarDropdown" style="width: 200px">
                                                 {{#if bidderRole}}
-                                                    <a class="dropdown-item text-decoration-none" href="../user/update-profile" >
+                                                    <a class="dropdown-item text-decoration-none" href="/user/update-profile" >
                                                         <i class="fa fa-user fa-2x mr-2" aria-hidden="true"></i>
                                                         Thông tin cá nhân
                                                     </a>
-                                                    <a class="dropdown-item text-decoration-none" href="../user/favorite">
+                                                    <a class="dropdown-item text-decoration-none" href="/user/favorite">
                                                         <i class="fa fa-heart-o fa-2x mr-2" aria-hidden="true"></i>
                                                         Danh sách yêu thích
                                                     </a>
-                                                    <a class="dropdown-item text-decoration-none" href="../user/auction-history">
+                                                    <a class="dropdown-item text-decoration-none" href="/user/auction-history">
                                                         <i class="fa fa-history fa-2x mr-2" aria-hidden="true"></i>
                                                         Lịch sử đấu giá
                                                     </a>
-                                                    <a class="dropdown-item text-decoration-none" href="../user/comment-from-seller">
+                                                    <a class="dropdown-item text-decoration-none" href="/user/comment-from-seller/{{user._id}}">
                                                         <i class="fa fa-comment fa-2x mr-2" aria-hidden="true"></i>
                                                         Đánh giá từ người bán
                                                     </a>
                                                 {{else}}
                                                     {{#if adminRole}}
+                                                        <a class="dropdown-item text-decoration-none" href="/user/update-profile" >
+                                                            <i class="fa fa-user fa-2x mr-2" aria-hidden="true"></i>
+                                                            Thông tin cá nhân
+                                                        </a>
+                                                        <a class="dropdown-item text-decoration-none" href="/user/favorite">
+                                                            <i class="fa fa-heart-o fa-2x mr-2" aria-hidden="true"></i>
+                                                            Danh sách yêu thích
+                                                        </a>
+                                                        <a class="dropdown-item text-decoration-none" href="/user/auction-history">
+                                                            <i class="fa fa-history fa-2x mr-2" aria-hidden="true"></i>
+                                                            Lịch sử đấu giá
+                                                        </a>
+                                                        <a class="dropdown-item text-decoration-none" href="/user/comment-from-seller/{{user._id}}">
+                                                            <i class="fa fa-comment fa-2x mr-2" aria-hidden="true"></i>
+                                                            Đánh giá từ người bán
+                                                        </a>
                                                         <a class="dropdown-item text-decoration-none" href="/admin">
                                                             <i class="fa fa-cube fa-2x mr-2" aria-hidden="true"></i>
                                                             Kênh quản trị
                                                         </a>
                                                     {{else}}
-                                                        <a class="dropdown-item text-decoration-none" href="../user/update-profile">
+                                                        <a class="dropdown-item text-decoration-none" href="/user/update-profile" >
                                                             <i class="fa fa-user fa-2x mr-2" aria-hidden="true"></i>
                                                             Thông tin cá nhân
+                                                        </a>
+                                                        <a class="dropdown-item text-decoration-none" href="/user/favorite">
+                                                            <i class="fa fa-heart-o fa-2x mr-2" aria-hidden="true"></i>
+                                                            Danh sách yêu thích
+                                                        </a>
+                                                        <a class="dropdown-item text-decoration-none" href="/user/auction-history">
+                                                            <i class="fa fa-history fa-2x mr-2" aria-hidden="true"></i>
+                                                            Lịch sử đấu giá
+                                                        </a>
+                                                        <a class="dropdown-item text-decoration-none" href="/user/comment-from-seller/{{user._id}}">
+                                                            <i class="fa fa-comment fa-2x mr-2" aria-hidden="true"></i>
+                                                            Đánh giá từ người bán
                                                         </a>
                                                         <a class="dropdown-item text-decoration-none" href="/seller/channel">
                                                             <i class="fa fa-cube fa-2x mr-2" aria-hidden="true"></i>
Index: views/layouts/seller.layout.hbs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>Home</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\" integrity=\"sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\" crossorigin=\"anonymous\">\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\">\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css\">\r\n    <style>\r\n        .card-footer{\r\n            background-color: #fff;\r\n            border-radius: 50px !important;\r\n            margin: 5px;\r\n        }\r\n    </style>\r\n\r\n    {{{_sections.css}}}\r\n</head>\r\n<body>\r\n    <nav class=\"navbar has-background-grey-light \"  role=\"navigation\" aria-label=\"main navigation\">\r\n        <div class=\"navbar-brand\">\r\n            <a class=\"navbar-item\" href=\"/\">\r\n                <img src=\"https://bulma.io/images/bulma-logo.png\" width=\"112\" height=\"28\">\r\n            </a>\r\n            <a role=\"button\" class=\"navbar-burger\" aria-label=\"menu\" aria-expanded=\"false\">\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n                <span aria-hidden=\"true\"></span>\r\n            </a>\r\n        </div>\r\n        <div class=\"navbar-menu\">\r\n            <div class=\"navbar-start\">\r\n\r\n                <a href=\"/seller/channel\" class=\"navbar-item text-decoration-none\">\r\n                    <strong>\r\n                        Kênh người bán\r\n                    </strong>\r\n\r\n                </a>\r\n\r\n                {{#if XemSanPham.isActive}}\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\">\r\n                        <strong>\r\n                            Xem sản phẩm\r\n                        </strong>\r\n                    </a>\r\n                    {{#if XemChiTiet.isActive}}\r\n                        <span class=\"navbar-item\"> > </span>\r\n                        <p href=\"/seller/channel/product\" class=\"navbar-item text-decoration-none\">\r\n                            <strong>\r\n                                Xem Chi Tiết\r\n                            </strong>\r\n                        </p>\r\n                    {{/if}}\r\n                {{else if ThemSanPham.isActive}}\r\n\r\n                    <span class=\"navbar-item\"> > </span>\r\n                    <a href=\"/seller/channel/product/insert\" class=\"navbar-item text-decoration-none\">\r\n                        <strong>\r\n                            Thêm Sản phẩm\r\n                        </strong>\r\n                    </a>\r\n                {{/if}}\r\n\r\n\r\n            </div>\r\n            <div class=\"navbar-end\">\r\n                <div class=\"navbar-item has-dropdown is-hoverable\">\r\n                    <div href=\"#\" class=\"navbar-link\">\r\n                        <i class=\"fa fa-user-circle fa-3x\" aria-hidden=\"true\"></i>\r\n                        <p class=\"ml-3\">\r\n                            {{user.name}}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div class=\"navbar-dropdown\">\r\n                        <a class=\"navbar-item text-decoration-none\" href=\"/user/update-profile\">\r\n                            <i class=\"fa fa-user fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Thông tin cá nhân\r\n                        </a>\r\n                        <a class=\"navbar-item text-decoration-none\">\r\n                            <i class=\"fa fa-cube fa-2x mr-1\" aria-hidden=\"true\"></i>\r\n                            Kênh Người bán\r\n                        </a>\r\n                        <hr class=\"navbar-divider\">\r\n                        <form id=\"formLogout\" action=\"/account/logout\" method=\"post\"></form>\r\n                        <a class=\"navbar-item text-decoration-none\" href=\"javascript: $('#formLogout').submit();\">\r\n                            <i class=\"fa fa-sign-out fa-2x mr-2\" aria-hidden=\"true\"></i>\r\n                            Đăng xuất\r\n                        </a>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n\r\n    <section>\r\n        <div class=\"row\">\r\n            <div class=\"col-md-3 has-background-grey-light pt-6 min-vh-100\">\r\n                <aside class=\"menu\">\r\n                    <ul class=\"menu-list h4 mb-5\">\r\n                        <a class=\"menu-label text-decoration-none {{#if ThongTinChung.isActive}}is-active{{/if}}\" href=\"/seller/channel\">\r\n                            <i class=\"fa fa-tachometer fa-2x \" aria-hidden=\"true\"></i>\r\n                            Thông Tin Chung\r\n                        </a>\r\n                    </ul>\r\n\r\n                    <ul class=\"menu-list h4 mb-5\">\r\n                        <li>\r\n                            <a class=\"menu-label text-decoration-none\" href=\"/seller/channel/product\">\r\n                                <i class=\"fa fa-cube fa-2x\" aria-hidden=\"true\"></i>\r\n                                Quản lý Sản Phẩm\r\n                            </a>\r\n                            <ul>\r\n                                <li><a class=\"{{#if XemSanPham.isActive}}is-active{{/if}} text-decoration-none\" href=\"/seller/channel/product\">Xem Sản phẩm</a></li>\r\n                                <li><a class=\"{{#if ThemSanPham.isActive}}is-active{{/if}} text-decoration-none\" href=\"/seller/channel/product/insert\">Thêm Sản Phẩm</a></li>\r\n                            </ul>\r\n                        </li>\r\n                    </ul>\r\n\r\n                    <ul class=\"menu-list h4 mb-5\">\r\n                        <a class=\"menu-label text-decoration-none {{#if DanhGia.isActive}}is-active{{/if}}\" href=\"/user/comment-from-bidder/{{sellerID}}\">\r\n                            <i class=\"fa fa-users fa-2x \" aria-hidden=\"true\"></i>\r\n                            Đánh giá của người mua\r\n                        </a>\r\n                    </ul>\r\n\r\n                </aside>\r\n            </div>\r\n\r\n            <div class=\"col-md-9\">\r\n                {{{body}}}\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js\" integrity=\"sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js\" integrity=\"sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2\" crossorigin=\"anonymous\"></script>\r\n    {{{_sections.js}}}\r\n</body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/views/layouts/seller.layout.hbs b/views/layouts/seller.layout.hbs
--- a/views/layouts/seller.layout.hbs	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/views/layouts/seller.layout.hbs	(date 1642001682461)
@@ -75,9 +75,21 @@
                     </div>
 
                     <div class="navbar-dropdown">
-                        <a class="navbar-item text-decoration-none" href="/user/update-profile">
+                        <a class="dropdown-item text-decoration-none" href="/user/update-profile" >
                             <i class="fa fa-user fa-2x mr-2" aria-hidden="true"></i>
                             Thông tin cá nhân
+                        </a>
+                        <a class="dropdown-item text-decoration-none" href="/user/favorite">
+                            <i class="fa fa-heart-o fa-2x mr-2" aria-hidden="true"></i>
+                            Danh sách yêu thích
+                        </a>
+                        <a class="dropdown-item text-decoration-none" href="/user/auction-history">
+                            <i class="fa fa-history fa-2x mr-2" aria-hidden="true"></i>
+                            Lịch sử đấu giá
+                        </a>
+                        <a class="dropdown-item text-decoration-none" href="/user/comment-from-seller/{{user._id}}">
+                            <i class="fa fa-comment fa-2x mr-2" aria-hidden="true"></i>
+                            Đánh giá từ người bán
                         </a>
                         <a class="navbar-item text-decoration-none">
                             <i class="fa fa-cube fa-2x mr-1" aria-hidden="true"></i>
Index: utils/format-product.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import {ObjectID} from \"mongodb\";\r\nimport modelCategory from '../models/category-model.js'\r\nimport productModel from \"../models/product-model.js\";\r\n\r\nexport default {\r\n    async formatForInsert(dataProduct, sellerID){\r\n        const goodData = {};\r\n        goodData.proName = dataProduct.proName;\r\n\r\n        //Category\r\n        goodData.proType = new ObjectID(dataProduct.catParent);\r\n        goodData.catChildType = dataProduct.catChild;\r\n        const catInformation = await modelCategory.findByID(goodData.proType);\r\n        const catData = catInformation[0];\r\n        goodData.catParent = catInformation[0].catParent;\r\n        goodData.catChild = catInformation[0].catChild[goodData.catChildType].name;\r\n        //--Update category\r\n        catData.quantity += 1;\r\n        catData.catChild[+goodData.catChildType].quantity += 1;\r\n        await modelCategory.updateData(catData);\r\n\r\n\r\n        //Auto extend and bidderType\r\n        goodData.autoExtend = (dataProduct.autoExtend === 'true');\r\n        goodData.bidderType = (dataProduct.bidderRange === 'true');\r\n\r\n        //Product Description\r\n        goodData.proDescription = dataProduct.proDescription;\r\n\r\n        //Seller infor\r\n        goodData.sellerInfo = new ObjectID(sellerID);\r\n\r\n        //Product date\r\n        goodData.proStartDate = new Date();\r\n        goodData.proEndDate = new Date(dataProduct.proEndDate);\r\n        goodData.numberImage = dataProduct.index;\r\n        goodData.proBuyNowPrice = Number(dataProduct.proBuyNowPrice.replace(/[^0-9.-]+/g,\"\"));\r\n        goodData.proCurBidPrice = Number(dataProduct.firstPrice.replace(/[^0-9.-]+/g,\"\"));\r\n        goodData.proInitalPrice = goodData.proCurBidPrice;\r\n        goodData.proPriceStep = Number(dataProduct.proPriceStep.replace(/[^0-9.-]+/g,\"\"));\r\n\r\n        //Bidder Comment and Seller Comment\r\n        goodData.isBidderComment = false;\r\n        goodData.isSellerComment = false;\r\n        goodData.proHighestPrice = goodData.proCurBidPrice;\r\n\r\n        //Product Bidder Quanrtity\r\n        goodData.proBidQuantity = 0;\r\n\r\n        return goodData;\r\n    },\r\n\r\n    formatDate(dataProduct) {\r\n        //Format time\r\n        const date1 = new Date();\r\n        const date2 = dataProduct.proEndDate;\r\n        const diffTime = Math.abs(date2 - date1);\r\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n        if (date2 < date1){\r\n            dataProduct.duration = 'Đã hết hạn'\r\n        }\r\n        else if (diffDays <= 3) {\r\n            dataProduct.duration = `Còn ${diffDays} ngày`;\r\n        }\r\n        else {\r\n            dataProduct.duration = dataProduct.proEndDate.toLocaleString(\"en-GB\");\r\n        }\r\n    },\r\n\r\n    async formatCategory(dataProduct){\r\n        //format category\r\n        const cat = await modelCategory.findByID(dataProduct.proType);\r\n        if (cat != null) {\r\n            const i = dataProduct.catChildType;\r\n            const catName = cat[0].catParent + \" - \" + cat[0].catChild[i];\r\n            dataProduct.catName = catName;\r\n        }\r\n    },\r\n\r\n    findProductWithSellerID(products, sellerID){\r\n        for (let i = products.length - 1; i >= 0; i--)\r\n            if (products[i].sellerInfo.toString() !== sellerID.toString())\r\n                products.splice(i, 1);\r\n\r\n    },\r\n\r\n    async findProductWithStatus(products, status){\r\n        // 1 : Đấu giá thành công ; => Có người mua và đã hết hạn\r\n        // 2 : Đấu giá thất bại ; => Không có người mua và đã hết hạn\r\n        // 3 : Đang được đấu giá ;  => Còn hạn và đã có người đặt\r\n        // 4 : Chưa được đấu giá  => Còn hạn và chưa có người đặt\r\n\r\n        // Kiểm tra những phần tử không phù hợp để loại\r\n        status = +status;\r\n        for (var i = products.length - 1; i >= 0; i--) {\r\n            const product = products[i];\r\n            // Kiểm tra đã hết hạn hay chưa\r\n            const endDate = new Date(product.proEndDate);\r\n            const currentDate = new Date();\r\n            if (endDate - currentDate > 0) { // Nếu còn hạn\r\n                if (status === 1 || status === 2) {\r\n                    const index = products.indexOf(product);\r\n                    products.splice(index, 1);\r\n                    continue;\r\n                }\r\n            } else { // Nếu hết hạn\r\n                if (status === 3 || status === 4) {\r\n                    const index = products.indexOf(product);\r\n                    products.splice(index, 1);\r\n                    continue;\r\n                }\r\n\r\n            }\r\n\r\n            //Kiểm tra có bị hủy hợp đồng hay không\r\n            if (status != 2 && product.cancelTransaction){\r\n                const index = products.indexOf(product);\r\n                products.splice(index, 1);\r\n                continue;\r\n            }\r\n            else if (status === 2 && product.cancelTransaction)\r\n                continue;\r\n\r\n            //Kiểm tra có người mua hay không\r\n            // const bidderHistory = await productModel.getBidderHistoryWithProID(product._id);\r\n\r\n            if (product.curBidderInfo === null || product.curBidderInfo === undefined || product.curBidderInfo.length === 0) {// Nếu như không có người mua\r\n                if (status === 1 || status === 3) {\r\n                    const index = products.indexOf(product);\r\n                    products.splice(index, 1);\r\n                    continue;\r\n                }\r\n            } else { // Nếu như có người đặt\r\n                if (status === 2 || status === 4) {\r\n                    const index = products.indexOf(product);\r\n                    products.splice(index, 1);\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    async getStatus(product){\r\n        // 1 : Đấu giá thành công ; => Có người mua và đã hết hạn\r\n        // 2 : Đấu giá thất bại ; => Không có người mua và đã hết hạn\r\n        // 3 : Đang được đấu giá ;  => Còn hạn và đã có người đặt\r\n        // 4 : Chưa được đấu giá  => Còn hạn và chưa có người đặt\r\n\r\n        // Kiểm tra những phần tử không phù hợp để loại\r\n\r\n        // Kiểm tra đã hết hạn hay chưa\r\n        const endDate = new Date(product.proEndDate);\r\n        const currentDate = new Date();\r\n        //Kiểm tra có người mua hay không\r\n        // const bidderHistory = await productModel.getBidderHistoryWithProID(product._id);\r\n\r\n        if (endDate - currentDate <= 0) { // Nếu còn hạn\r\n            if (product.curBidderInfo === null || product.curBidderInfo === undefined || product.curBidderInfo.length === 0 || product.cancelTransaction === true)\r\n                return \"<span class='text-danger'>Đấu giá thất bại</span>\"\r\n            else\r\n                return \"<span class='text-success'>Đấu giá thành công</span>\"\r\n        } else { // Nếu hết hạn\r\n            if (product.curBidderInfo === null || product.curBidderInfo === undefined)\r\n                return \"<span class='text-warning'>Chưa được đấu giá</span>\"\r\n            else\r\n                return \"<span class='text-success'>Đang được đấu giá</span>\"\r\n        }\r\n    },\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/utils/format-product.js b/utils/format-product.js
--- a/utils/format-product.js	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/utils/format-product.js	(date 1642001207412)
@@ -29,6 +29,7 @@
 
         //Seller infor
         goodData.sellerInfo = new ObjectID(sellerID);
+        goodData.curBidderInfo = null;
 
         //Product date
         goodData.proStartDate = new Date();
Index: testDB.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import productModel from \"./models/product-model.js\";\r\nimport {ObjectId} from \"mongodb\";\r\nimport accountModel from \"./models/account-model.js\";\r\nimport mailing from \"./utils/mailing.js\";\r\nimport modelCategory from \"./models/category-model.js\";\r\nimport bid from \"./routes/bid.js\";\r\n\r\n\r\n\r\nasync function testFunc(){\r\n    const data = await accountModel.getCommentOfSeller(new ObjectId(\"61be966d0b93276ccd0da00f\"));\r\n    console.log(data[0]);\r\n}\r\n\r\nawait testFunc();\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/testDB.js b/testDB.js
--- a/testDB.js	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/testDB.js	(date 1642001490526)
@@ -8,8 +8,7 @@
 
 
 async function testFunc(){
-    const data = await accountModel.getCommentOfSeller(new ObjectId("61be966d0b93276ccd0da00f"));
-    console.log(data[0]);
+    await productModel.updateTest();
 }
 
 await testFunc();
Index: models/product-model.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import mongoClient from '../utils/db.js'\r\nimport { ObjectId } from \"mongodb\";\r\n\r\n\r\nasync function findTopExpirationFunc(collection, now) {\r\n  return await collection.aggregate([\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'sellerInfo',\r\n        foreignField: '_id',\r\n        as: 'sellerInfo'\r\n      },\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'curBidderInfo',\r\n        foreignField: '_id',\r\n        as: 'curBidderInfo'\r\n      }\r\n    },\r\n    {\r\n      $match: {proEndDate:{$gt: now}}\r\n    }\r\n  ]).sort({proEndDate: 1}).limit(5).toArray();\r\n}\r\n\r\nasync function findTopBidFunc(collection, now) {\r\n  return await collection.aggregate([\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'sellerInfo',\r\n        foreignField: '_id',\r\n        as: 'sellerInfo'\r\n      },\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'curBidderInfo',\r\n        foreignField: '_id',\r\n        as: 'curBidderInfo'\r\n      }\r\n    },\r\n    {\r\n      $match: {proEndDate:{$gt: now}}\r\n    }\r\n  ]).sort({proBidQuantity: -1}).limit(5).toArray();\r\n}\r\n\r\nasync function findTopPriceFunc(collection, now) {\r\n  return await collection.aggregate([\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'sellerInfo',\r\n        foreignField: '_id',\r\n        as: 'sellerInfo'\r\n      },\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'curBidderInfo',\r\n        foreignField: '_id',\r\n        as: 'curBidderInfo'\r\n      }\r\n    },\r\n    {\r\n      $match: {proEndDate:{$gt: now}}\r\n    }\r\n  ]).sort({proCurBidPrice: -1}).limit(5).toArray();\r\n}\r\n\r\nasync function findByIdFunc(collection, id) {\r\n  return await collection.aggregate([\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'sellerInfo',\r\n        foreignField: '_id',\r\n        as: 'sellerInfo'\r\n      },\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'curBidderInfo',\r\n        foreignField: '_id',\r\n        as: 'curBidderInfo'\r\n      }\r\n    },\r\n    {\r\n      $match: {_id: new ObjectId(id)}\r\n    }\r\n  ]).toArray();\r\n}\r\n\r\nasync function findByCategoryParentFunc(collection, cat, numberProduct, userID) {\r\n  if (numberProduct === undefined)\r\n    return await collection.find({proType: new ObjectId(cat), sellerInfo: new ObjectId(userID)}).sort({proEndDate : 1}).toArray();\r\n  else\r\n    return await collection.find({catParent: cat}).limit(numberProduct).toArray();\r\n}\r\n\r\n//sort({proCurBidPrice: 1}).skip(offset).limit(limit).toArray();\r\n\r\nasync function findByCategoryFunc(collection, catID, catChildType, userID) {\r\n  return await collection.find({ proType: catID, catChildType: catChildType, sellerInfo: new ObjectId(userID)}).sort({proEndDate: 1}).toArray();\r\n}\r\n\r\nasync function countTotalSearchProductFunc(collection, keyword, type) {\r\n  if (type === 'name') {\r\n    return await collection.aggregate([\r\n      {\r\n        '$search':{\r\n          'index': 'custom',\r\n          'text': {\r\n            'query': keyword,\r\n            'path': 'proName',\r\n            'fuzzy': {}\r\n          }\r\n        }\r\n      },\r\n      {\r\n        $count: 'total'\r\n      }]).toArray();\r\n  }\r\n  else if (type === 'category') {\r\n    return await collection.aggregate([\r\n      {\r\n        '$search':{\r\n          'index': 'custom',\r\n          'text': {\r\n            'query': keyword,\r\n            'path': ['catParent','catChild'],\r\n            'fuzzy': {}\r\n          }\r\n        }\r\n      },\r\n      {\r\n        $count: 'total'\r\n      }]).toArray();\r\n  }\r\n}\r\n\r\n\r\n\r\nasync function searchByTypeFunc(collection, keyword, type, limit, offset, sort, catParentFind, catChildFind, userID) {\r\n  if (type === 'name') {\r\n    if(sort === 'price-ascending'){\r\n        return await collection.aggregate([\r\n          {\r\n            '$search':{\r\n              'index': 'custom',\r\n              'text': {\r\n                'query': keyword,\r\n                'path': 'proName',\r\n                'fuzzy': {}\r\n              }\r\n            }\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'sellerInfo',\r\n              foreignField: '_id',\r\n              as: 'sellerInfo'\r\n            },\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'curBidderInfo',\r\n              foreignField: '_id',\r\n              as: 'curBidderInfo'\r\n            }\r\n          }]).sort({proCurBidPrice: 1}).skip(offset).limit(limit).toArray();\r\n    }\r\n    else if(sort === 'time-descending'){\r\n      if (catParentFind && catChildFind){\r\n        return await collection.aggregate([\r\n          {\r\n            '$search':{\r\n              'index': 'custom',\r\n              'text': {\r\n                'query': keyword,\r\n                'path': 'proName',\r\n                'fuzzy': {}\r\n              }\r\n            }\r\n          },\r\n          {\r\n            '$match':{\r\n              'proType' : new ObjectId(catParentFind),\r\n              'catChildType': catChildFind,\r\n              'sellerInfo': new ObjectId(userID)\r\n            }\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'sellerInfo',\r\n              foreignField: '_id',\r\n              as: 'sellerInfo'\r\n            },\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'curBidderInfo',\r\n              foreignField: '_id',\r\n              as: 'curBidderInfo'\r\n            }\r\n          }]).toArray();\r\n      }\r\n      else if (catParentFind){\r\n        return await collection.aggregate([\r\n          {\r\n            '$search':{\r\n              'index': 'custom',\r\n              'text': {\r\n                'query': keyword,\r\n                'path': 'proName',\r\n                'fuzzy': {}\r\n              }\r\n            }\r\n          },\r\n          {\r\n            '$match':{\r\n              'proType' : new ObjectId(catParentFind),\r\n              'sellerInfo': new ObjectId(userID)\r\n            }\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'sellerInfo',\r\n              foreignField: '_id',\r\n              as: 'sellerInfo'\r\n            },\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'curBidderInfo',\r\n              foreignField: '_id',\r\n              as: 'curBidderInfo'\r\n            }\r\n          }]).toArray();\r\n      }\r\n      else if (userID){\r\n        return await collection.aggregate([\r\n          {\r\n            '$search':{\r\n              'index': 'custom',\r\n              'text': {\r\n                'query': keyword,\r\n                'path': 'proName',\r\n                'fuzzy': {}\r\n              }\r\n            }\r\n          },\r\n          {\r\n            $match:{\r\n              'sellerInfo': new ObjectId(userID)\r\n            }\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'sellerInfo',\r\n              foreignField: '_id',\r\n              as: 'sellerInfo'\r\n            },\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'curBidderInfo',\r\n              foreignField: '_id',\r\n              as: 'curBidderInfo'\r\n            }\r\n          }]).toArray();\r\n      }\r\n      else\r\n        return await collection.aggregate([\r\n          {\r\n            '$search':{\r\n              'index': 'custom',\r\n              'text': {\r\n                'query': keyword,\r\n                'path': 'proName',\r\n                'fuzzy': {}\r\n              }\r\n            }\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'sellerInfo',\r\n              foreignField: '_id',\r\n              as: 'sellerInfo'\r\n            },\r\n          },\r\n          {\r\n            $lookup: {\r\n              from: 'account',\r\n              localField: 'curBidderInfo',\r\n              foreignField: '_id',\r\n              as: 'curBidderInfo'\r\n            }\r\n          }]).sort({proEndDate: -1}).skip(offset).limit(limit).toArray();\r\n    }\r\n  }\r\n  else if (type === 'category') {\r\n    if(sort === 'price-ascending')\r\n      return await collection.aggregate([\r\n        {\r\n          '$search':{\r\n            'index': 'custom',\r\n            'text': {\r\n              'query': keyword,\r\n              'path': ['catParent','catChild'],\r\n              'fuzzy': {}\r\n            }\r\n          }\r\n        },\r\n        {\r\n          $lookup: {\r\n            from: 'account',\r\n            localField: 'sellerInfo',\r\n            foreignField: '_id',\r\n            as: 'sellerInfo'\r\n          },\r\n        },\r\n        {\r\n          $lookup: {\r\n            from: 'account',\r\n            localField: 'curBidderInfo',\r\n            foreignField: '_id',\r\n            as: 'curBidderInfo'\r\n          }\r\n        }]).sort({proCurBidPrice: 1}).skip(offset).limit(limit).toArray();\r\n    else if(sort === 'time-descending')\r\n      return await collection.aggregate([\r\n        {\r\n          '$search':{\r\n            'index': 'custom',\r\n            'text': {\r\n              'query': keyword,\r\n              'path': ['catParent','catChild'],\r\n              'fuzzy': {}\r\n            }\r\n          }\r\n        },\r\n        {\r\n          $lookup: {\r\n            from: 'account',\r\n            localField: 'sellerInfo',\r\n            foreignField: '_id',\r\n            as: 'sellerInfo'\r\n          },\r\n        },\r\n        {\r\n          $lookup: {\r\n            from: 'account',\r\n            localField: 'curBidderInfo',\r\n            foreignField: '_id',\r\n            as: 'curBidderInfo'\r\n          }\r\n        }]).sort({proEndDate: -1}).skip(offset).limit(limit).toArray();\r\n  }\r\n}\r\n\r\nasync function countTotalProductFunc(collection){\r\n  return await collection.find().count();\r\n}\r\n\r\nasync function getLimitProductFunc(collection, limit, offset){\r\n  return await collection.aggregate([\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'sellerInfo',\r\n        foreignField: '_id',\r\n        as: 'sellerInfo'\r\n      },\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'curBidderInfo',\r\n        foreignField: '_id',\r\n        as: 'curBidderInfo'\r\n      }\r\n    }\r\n  ]).skip(offset).limit(limit).toArray()\r\n}\r\n\r\nasync function getAllFunc(collection, userID){\r\n  if (userID != undefined)\r\n    return await collection.find({sellerInfo : new ObjectId(userID)}).sort({proEndDate: 1}).toArray();\r\n  else\r\n    return await collection.find().sort({proEndDate: 1}).toArray();\r\n}\r\n\r\nasync function insertDataFunc(collection, data){\r\n  var idImageInsert;\r\n  await collection.insertOne(data);\r\n  return data._id;\r\n}\r\n\r\nasync function updateDescriptionFunc(collection, ProID, description){\r\n  return await collection.updateMany({_id : ProID}, {$set: {proDescription: description}});\r\n}\r\n\r\nasync function deleteProductFunc(collection, id) {\r\n  return await collection.deleteOne({ _id: id });\r\n}\r\n\r\nasync function countTotalCategoryProductFunc(collection, category) {\r\n  return await collection.find({$or: [{catParent: category }, {catChild: category}]}).count();\r\n}\r\n\r\nasync function getLimitCategoryProductFunc(collection, limit, offset, category) {\r\n  return await collection.find({$or: [{catParent: category }, {catChild: category}]}).skip(offset).limit(limit).toArray();\r\n}\r\n\r\nasync function getExpiredProductFunc(collection, now) {\r\n  return await collection.aggregate([\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'sellerInfo',\r\n        foreignField: '_id',\r\n        as: 'sellerInfo'\r\n      },\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'curBidderInfo',\r\n        foreignField: '_id',\r\n        as: 'curBidderInfo'\r\n      }\r\n    },\r\n    {\r\n      $match: {proEndDate:{$lte: now, $gt: new Date(now - 60000)}}\r\n    }\r\n  ]).toArray();\r\n}\r\n\r\nasync function getBidderHistoryWithProIDFunc(collection, proID){\r\n  return await collection.aggregate([\r\n    {\r\n      $match: {\r\n        proID:{$eq: new ObjectId(proID)},\r\n        isDenied:{$eq:0}\r\n      }\r\n    },\r\n    {\r\n      $sort: {\r\n        \"price\" : -1,\r\n        \"dateBid\" : -1\r\n      }\r\n    },\r\n    {\r\n      $group: {\r\n        _id: \"$userID\",\r\n        \"price\":{$first:\"$price\"},\r\n        \"dateBid\":{$first:\"$dateBid\"},\r\n        \"isDenied\":{$first:\"$isDenied\"},\r\n        \"curProPrice\":{$first:\"$price\"},\r\n      }\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: '_id',\r\n        foreignField: '_id',\r\n        as: 'bidderInfo'\r\n      }\r\n    }\r\n  ]).sort({\"price\" : -1, \"dateBid\" : -1}).toArray();\r\n}\r\n\r\nasync function denyUserOnBidderHistoryFunc(collection, productID, userID){\r\n  const myQuery = {\"proID\" : new ObjectId(productID), \"userID\" : new ObjectId(userID)};\r\n  const myUpdate =  {$set : {isDenied : 1}};\r\n\r\n  await collection.updateMany(myQuery, myUpdate);\r\n}\r\n\r\nasync function updateCurrenBidderInforFunc(collection, ProID, newUser){\r\n  const myQuery = {\"_id\" : new ObjectId(ProID)};\r\n  const myUpdate =  {$set : {curBidderInfo : newUser}};\r\n\r\n  await collection.updateOne(myQuery, myUpdate);\r\n}\r\n\r\nasync function updatePriceProductFunc(collection, productID, maximumPrice){\r\n  const myQuery = {\"_id\" : new ObjectId(productID)};\r\n  const myUpdate =  {$set : {proCurBidPrice : maximumPrice}};\r\n\r\n  await collection.updateOne(myQuery, myUpdate);\r\n}\r\n\r\nasync function getAutoExtendProductFunc(collection){\r\n\r\n  const myQuery = {autoExtend: true, isExtend: false};\r\n  const products = await collection.aggregate([\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'sellerInfo',\r\n        foreignField: '_id',\r\n        as: 'sellerInfo'\r\n      },\r\n    },\r\n    {\r\n      $lookup: {\r\n        from: 'account',\r\n        localField: 'curBidderInfo',\r\n        foreignField: '_id',\r\n        as: 'curBidderInfo'\r\n      }\r\n    },\r\n    {\r\n      $match: {autoExtend: true, isExtend: false}\r\n    }\r\n  ]).toArray();\r\n  // const products = await collection.find(myQuery).toArray();\r\n\r\n  for (let i =products.length - 1; i>=0; i--) {\r\n    const endDate = products[0].proEndDate.getTime();\r\n    const currentDate = new Date().getTime();\r\n    if (currentDate > endDate) {\r\n      products.splice(i, 1);\r\n      continue;\r\n    }\r\n\r\n    const diffTime = Math.abs(currentDate - endDate);\r\n    const diffHours = Math.floor(diffTime / (1000 * 60 * 60));\r\n    const diffMinutes = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));\r\n    if (diffMinutes > 5 || products[0].isExtend || diffHours > 1)\r\n      products.splice(i, 1);\r\n      continue;\r\n  }\r\n\r\n  return products;\r\n}\r\n\r\nasync function updateProEndDateFunc(collection, proID, newDate){\r\n  const myQuery = {\"_id\" : new ObjectId(proID)};\r\n  const myUpdate =  {$set : {proEndDate : newDate, isExtend : true}};\r\n\r\n  await collection.updateOne(myQuery, myUpdate);\r\n}\r\n\r\nasync function updateProNameEnglishFunc(collection, proID, proNameEnglish){\r\n  const myQuery = {\"_id\" : new ObjectId(proID)};\r\n  const myUpdate =  {$set : {proNameEnglish : proNameEnglish}};\r\n\r\n  await collection.updateOne(myQuery, myUpdate);\r\n}\r\n\r\nasync function updateProductFunc(collection, ProID, attritubes){\r\n  const myQuery = {\"_id\" : new ObjectId(ProID)};\r\n  const myUpdate =  {$set : attritubes};\r\n\r\n  await collection.updateOne(myQuery, myUpdate);\r\n}\r\n\r\nasync function searchVietnameseFunc(collection, keyword){\r\n    return await collection.aggregate([\r\n      {\r\n        '$search':{\r\n          'index': 'custom',\r\n          'text': {\r\n            'query': keyword,\r\n            'path': 'proNameEnglish',\r\n            'fuzzy': {}\r\n          }\r\n        }\r\n      }]).toArray();\r\n}\r\n\r\nasync function updatePriceAndCurrentBidderFunc(collection, productID, currentPrice, userID, highestPrice){\r\n  const myQuery = {\"_id\" : new ObjectId(productID)};\r\n  const myUpdate =  {$set : {curBidderInfo : userID, proCurBidPrice: currentPrice, proHighestPrice: highestPrice}};\r\n\r\n  await collection.updateOne(myQuery, myUpdate);\r\n}\r\n\r\nasync function updateSellerCommentFunc(collection, ProID, isSellerComment){\r\n  const myQuery = {\"_id\" : new ObjectId(ProID)};\r\n  const myUpdate =  {$set : {isSellerComment: isSellerComment}};\r\n\r\n  await collection.updateOne(myQuery, myUpdate);\r\n}\r\n\r\nasync function updateCatParentFunc(collection, catOld, catNew) {\r\n  return await collection.updateMany({\r\n        catParent: catOld},\r\n      {$set: {catParent: catNew}}\r\n  );\r\n}\r\n\r\nasync function updateCatChildFunc(collection, catParent, catOld, catNew) {\r\n  return await collection.updateMany({\r\n        catParent: catParent,\r\n        catChild: catOld},\r\n      {$set: {catChild: catNew}}\r\n  );\r\n}\r\n\r\n\r\n//----------------------------------------------------------------------------------------//\r\nexport default {\r\n  async findTopExpiration(now) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await findTopExpirationFunc(collection, now);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async findTopBid(now) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await findTopBidFunc(collection, now);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async findTopPrice(now) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await findTopPriceFunc(collection, now);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async findById(id) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await findByIdFunc(collection, id);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async findByCategoryParent(cat, numberProduct, userID) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await findByCategoryParentFunc(collection, cat, numberProduct, userID);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async findByCategory(catID, catChildType, userID){\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      const id = new ObjectId(catID);\r\n      return await findByCategoryFunc(collection, id, catChildType, userID);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async countTotalSearchProduct(keyword, type) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await countTotalSearchProductFunc(collection, keyword, type);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async searchByType(keyword, type, limit, offset, sort, catParentFind, catChildFind, userID) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      // async function searchByTypeFunc(collection, keyword, type, limit, offset, sort, catParentFind, catChildFind, userID) {\r\n\r\n      const result = await searchByTypeFunc(collection, keyword, type, limit, offset, sort, catParentFind, catChildFind, userID);\r\n      return result;\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async searchVietnamese(keyword){\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n\r\n      const result = await searchVietnameseFunc(collection, keyword);\r\n      return result;\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  }\r\n  ,\r\n  async countTotalProduct() {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      const result = await countTotalProductFunc(collection);\r\n      return result;\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async getLimitProduct(limit, offset) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      const result = await getLimitProductFunc(collection, limit, offset);\r\n      return result;\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async deleteProduct(proId) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      const id = new ObjectId(proId);\r\n      return await deleteProductFunc(collection, id);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async getAll(userID) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await getAllFunc(collection, userID);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n\r\n  async insertData(data){\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await insertDataFunc(collection, data);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n\r\n  async updateDescription(ProID, description){\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await updateDescriptionFunc(collection, ProID, description);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async countTotalCategoryProduct(category) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await countTotalCategoryProductFunc(collection, category);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async getLimitCategoryProduct(limit, offset, category) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await getLimitCategoryProductFunc(collection, limit, offset, category);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async getExpiredProduct(now) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await getExpiredProductFunc(collection, now);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async getBidderHistoryWithProID(proID) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('bidderHistory');\r\n      return await getBidderHistoryWithProIDFunc(collection, proID);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async denyUserOnBidderHistory(productID, userID) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('bidderHistory');\r\n      await denyUserOnBidderHistoryFunc(collection, productID, userID);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updateCurrenBidderInfor(ProID, newUser) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updateCurrenBidderInforFunc(collection, ProID, newUser);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updatePriceProduct(productID, maximumPrice) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updatePriceProductFunc(collection, productID, maximumPrice);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async getAutoExtendProduct() {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      return await getAutoExtendProductFunc(collection);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updateProEndDate(proID, newDate) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updateProEndDateFunc(collection, proID, newDate);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updateProNameEnglish(product) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updateProNameEnglishFunc(collection, product._id, product.proNameEnglish);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updatePriceAndCurrentBidder(productID, currentPrice, userID, highestPrice) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updatePriceAndCurrentBidderFunc(collection, productID, currentPrice, userID, highestPrice);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updateSellerComment(ProID, isSellerComment) {\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updateSellerCommentFunc(collection, ProID, isSellerComment);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updateProduct(ProID, attritubes){\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updateProductFunc(collection, ProID, attritubes);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updateCatParent(catOld, catNew){\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updateCatParentFunc(collection, catOld, catNew);\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  },\r\n  async updateCatChild(catParent, catOld, catNew){\r\n    try {\r\n      await mongoClient.connect();\r\n      const db = mongoClient.db('onlineauction');\r\n      const collection = db.collection('product');\r\n      await updateCatChildFunc(collection, catParent, catOld, catNew)\r\n    } catch (e) {\r\n      console.error(e);\r\n    } finally {\r\n      await mongoClient.close()\r\n    }\r\n  }\r\n};
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/models/product-model.js b/models/product-model.js
--- a/models/product-model.js	(revision 5930d37af59aab2fd5a1f262bf91abe56f037a2d)
+++ b/models/product-model.js	(date 1642001510294)
@@ -991,5 +991,17 @@
     } finally {
       await mongoClient.close()
     }
+  },
+  async updateTest() {
+    try {
+      await mongoClient.connect();
+      const db = mongoClient.db('onlineauction');
+      const collection = db.collection('product');
+      await updateCatChildFunc(collection)
+    } catch (e) {
+      console.error(e);
+    } finally {
+      await mongoClient.close()
+    }
   }
 };
\ No newline at end of file
